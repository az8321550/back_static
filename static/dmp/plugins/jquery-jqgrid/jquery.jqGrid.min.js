/**
 * @license jqGrid  4.5.4 - jQuery Grid
 * Copyright (c) 2008, Tony Tomov, tony@trirand.com
 * Dual licensed under the MIT and GPL licenses
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
 * Date: 2013-10-06
 */
(function(n){"use strict";n.jgrid=n.jgrid||{};n.extend(n.jgrid,{version:"4.5.4",htmlDecode:function(n){return n&&(n==="&nbsp;"||n==="&#160;"||n.length===1&&n.charCodeAt(0)===160)?"":n?String(n).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):n},htmlEncode:function(n){return n?String(n).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):n},format:function(t){var i=n.makeArray(arguments).slice(1);return t==null&&(t=""),t.replace(/\{(\d+)\}/g,function(n,t){return i[t]})},msie:navigator.appName==="Microsoft Internet Explorer",msiever:function(){var n=-1,t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");return i.exec(t)!=null&&(n=parseFloat(RegExp.$1)),n},getCellIndex:function(t){var i=n(t);return i.is("tr")?-1:(i=(!i.is("td")&&!i.is("th")?i.closest("td,th"):i)[0],n.jgrid.msie)?n.inArray(i,i.parentNode.cells):i.cellIndex},stripHtml:function(n){n=String(n);return n?(n=n.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,""),n&&n!=="&nbsp;"&&n!=="&#160;"?n.replace(/\"/g,"'"):""):n},stripPref:function(t,i){var r=n.type(t);return(r==="string"||r==="number")&&(t=String(t),i=t!==""?String(i).replace(String(t),""):i),i},parse:function(jsonString){var js=jsonString;return js.substr(0,9)==="while(1);"&&(js=js.substr(9)),js.substr(0,2)==="/*"&&(js=js.substr(2,js.length-4)),js||(js="{}"),n.jgrid.useJSON===!0&&typeof JSON=="object"&&typeof JSON.parse=="function"?JSON.parse(js):eval("("+js+")")},parseDate:function(t,i,r,u){var rt=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),c=typeof i=="string"?i.match(rt):null,h=function(n,t){for(n=String(n),t=parseInt(t,10)||2;n.length<t;)n="0"+n;return n},f={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},o=0,s,e,nt,tt=function(n,t){return n===0?t===12&&(t=0):t!==12&&(t+=12),t},p,a;if(u===undefined&&(u=n.jgrid.formatter.date),u.parseRe===undefined&&(u.parseRe=/[Tt\\\/:_;.,\t\s-]/),u.masks.hasOwnProperty(t)&&(t=u.masks[t]),i&&i!=null)if(isNaN(+i)||String(t).toLowerCase()!=="u")if(i.constructor===Date)o=i;else if(c!==null)o=new Date(parseInt(c[1],10)),c[3]&&(p=Number(c[5])*60+Number(c[6]),p*=c[4]==="-"?1:-1,p-=o.getTimezoneOffset(),o.setTime(Number(Number(o)+p*6e4)));else{for(i=String(i).replace(/\\T/g,"T").replace(/\\t/,"t").split(u.parseRe),t=t.replace(/\\T/g,"T").replace(/\\t/,"t").split(u.parseRe),e=0,nt=t.length;e<nt;e++)t[e]==="M"&&(s=n.inArray(i[e],u.monthNames),s!==-1&&s<12&&(i[e]=s+1,f.m=i[e])),t[e]==="F"&&(s=n.inArray(i[e],u.monthNames,12),s!==-1&&s>11&&(i[e]=s+1-12,f.m=i[e])),t[e]==="a"&&(s=n.inArray(i[e],u.AmPm),s!==-1&&s<2&&i[e]===u.AmPm[s]&&(i[e]=s,f.h=tt(i[e],f.h))),t[e]==="A"&&(s=n.inArray(i[e],u.AmPm),s!==-1&&s>1&&i[e]===u.AmPm[s]&&(i[e]=s-2,f.h=tt(i[e],f.h))),t[e]==="g"&&(f.h=parseInt(i[e],10)),i[e]!==undefined&&(f[t[e].toLowerCase()]=parseInt(i[e],10));if(f.f&&(f.m=f.f),f.m===0&&f.y===0&&f.d===0)return"&#160;";f.m=parseInt(f.m,10)-1;a=f.y;a>=70&&a<=99?f.y=1900+f.y:a>=0&&a<=69&&(f.y=2e3+f.y);o=new Date(f.y,f.m,f.d,f.h,f.i,f.s,f.u)}else o=new Date(parseFloat(i)*1e3);else o=new Date(f.y,f.m,f.d,f.h,f.i,f.s,f.u);if(r===undefined)return o;u.masks.hasOwnProperty(r)?r=u.masks[r]:r||(r="Y-m-d");var l=o.getHours(),ut=o.getMinutes(),w=o.getDate(),v=o.getMonth()+1,d=o.getTimezoneOffset(),ft=o.getSeconds(),et=o.getMilliseconds(),b=o.getDay(),y=o.getFullYear(),k=(b+6)%7+1,g=(new Date(y,v-1,w)-new Date(y,0,1))/864e5,it={d:h(w),D:u.dayNames[b],j:w,l:u.dayNames[b+7],N:k,S:u.S(w),w:b,z:g,W:k<5?Math.floor((g+k-1)/7)+1:Math.floor((g+k-1)/7)||((new Date(y-1,0,1).getDay()+6)%7<4?53:52),F:u.monthNames[v- -11],m:h(v),M:u.monthNames[v-1],n:v,t:"?",L:"?",o:"?",Y:y,y:String(y).substring(2),a:l<12?u.AmPm[0]:u.AmPm[1],A:l<12?u.AmPm[2]:u.AmPm[3],B:"?",g:l%12||12,G:l,h:h(l%12||12),H:h(l),i:h(ut),s:h(ft),u:et,e:"?",I:"?",O:(d>0?"-":"+")+h(Math.floor(Math.abs(d)/60)*100+Math.abs(d)%60,4),P:"?",T:(String(o).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(o/1e3)};return r.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(n){return it.hasOwnProperty(n)?it[n]:n.substring(1)})},jqID:function(n){return String(n).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(t){return(t||n.jgrid.uidPref)+n.jgrid.guid++},getAccessor:function(n,t){var i,f,r=[],u;if(typeof t=="function")return t(n);if(i=n[t],i===undefined)try{if(typeof t=="string"&&(r=t.split(".")),u=r.length,u)for(i=n;i&&u--;)f=r.shift(),i=i[f]}catch(e){}return i},getXmlData:function(t,i,r){var f,u=typeof i=="string"?i.match(/^(.*)\[(\w+)\]$/):null;return typeof i=="function"?i(t):u&&u[2]?u[1]?n(u[1],t).attr(u[2]):n(t).attr(u[2]):(f=n(i,t),r)?f:f.length>0?n(f).text():undefined},cellWidth:function(){var t=n("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'><\/td><\/tr><\/table><\/div>"),i=t.appendTo("body").find("td").width();return t.remove(),Math.abs(i-5)>.1},cell_width:!0,ajaxOptions:{},from:function(t){var i=function(t,i){typeof t=="string"&&(t=n.data(t));var r=this,u=t,h=!0,o=!1,f=i,v=/[\$,%]/g,c=null,y=null,p=0,e=!1,a="",s=[],l=!0;if(typeof t=="object"&&t.push)t.length>0&&(l=typeof t[0]!="object"?!1:!0);else throw"data provides is not an array";return this._hasData=function(){return u===null?!1:u.length===0?!1:!0},this._getStr=function(n){var t=[];return o&&t.push("jQuery.trim("),t.push("String("+n+")"),o&&t.push(")"),h||t.push(".toLowerCase()"),t.join("")},this._strComp=function(n){return typeof n=="string"?".toString()":""},this._group=function(n,t){return{field:n.toString(),unique:t,items:[]}},this._toStr=function(t){return o&&(t=n.trim(t)),t=t.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),h?t:t.toLowerCase()},this._funcLoop=function(t){var i=[];return n.each(u,function(n,r){i.push(t(r))}),i},this._append=function(n){var t;for(f===null?f="":f+=a===""?" && ":a,t=0;t<p;t++)f+="(";e&&(f+="!");f+="("+n+")";e=!1;a="";p=0},this._setCommand=function(n,t){c=n;y=t},this._resetNegate=function(){e=!1},this._repeatCommand=function(n,t){return c===null?r:n!==null&&t!==null?c(n,t):y===null?c(n):l?c(y,n):c(n)},this._equals=function(n,t){return r._compare(n,t,1)===0},this._compare=function(n,t,i){var r=Object.prototype.toString;return(i===undefined&&(i=1),n===undefined&&(n=null),t===undefined&&(t=null),n===null&&t===null)?0:n===null&&t!==null?1:n!==null&&t===null?-1:r.call(n)==="[object Date]"&&r.call(t)==="[object Date]"?n<t?-i:n>t?i:0:(h||typeof n=="number"||typeof t=="number"||(n=String(n),t=String(t)),n<t)?-i:n>t?i:0},this._performSort=function(){s.length!==0&&(u=r._doSort(u,0))},this._doSort=function(n,t){var h=s[t].by,c=s[t].dir,l=s[t].type,a=s[t].datefmt,f,e,i,u,o;if(t===s.length-1)return r._getOrder(n,h,c,l,a);for(t++,f=r._getGroup(n,h,c,l,a),e=[],i=0;i<f.length;i++)for(o=r._doSort(f[i].items,t),u=0;u<o.length;u++)e.push(o[u]);return e},this._getOrder=function(t,i,u,f,e){var l=[],c=[],w=u==="a"?1:-1,a,o,s,y,p;for(f===undefined&&(f="text"),y=f==="float"||f==="number"||f==="currency"||f==="numeric"?function(n){var t=parseFloat(String(n).replace(v,""));return isNaN(t)?0:t}:f==="int"||f==="integer"?function(n){return n?parseFloat(String(n).replace(v,"")):0}:f==="date"||f==="datetime"?function(t){return n.jgrid.parseDate(e,t).getTime()}:n.isFunction(f)?f:function(t){return t=t?n.trim(String(t)):"",h?t:t.toLowerCase()},n.each(t,function(t,r){o=i!==""?n.jgrid.getAccessor(r,i):r;o===undefined&&(o="");o=y(o,r);c.push({vSort:o,index:t})}),c.sort(function(n,t){return n=n.vSort,t=t.vSort,r._compare(n,t,w)}),s=0,p=t.length;s<p;)a=c[s].index,l.push(t[a]),s++;return l},this._getGroup=function(t,i,u,f,e){var h=[],o=null,c=null,s;return n.each(r._getOrder(t,i,u,f,e),function(t,u){s=n.jgrid.getAccessor(u,i);s==null&&(s="");r._equals(c,s)||(c=s,o!==null&&h.push(o),o=r._group(i,s));o.items.push(u)}),o!==null&&h.push(o),h},this.ignoreCase=function(){return h=!1,r},this.useCase=function(){return h=!0,r},this.trim=function(){return o=!0,r},this.noTrim=function(){return o=!1,r},this.execute=function(){var t=f,i=[];return t===null?r:(n.each(u,function(){eval(t)&&i.push(this)}),u=i,r)},this.data=function(){return u},this.select=function(t){if(r._performSort(),!r._hasData())return[];if(r.execute(),n.isFunction(t)){var i=[];return n.each(u,function(n,r){i.push(t(r))}),i}return u},this.hasMatch=function(){return r._hasData()?(r.execute(),u.length>0):!1},this.andNot=function(n,t,i){return e=!e,r.and(n,t,i)},this.orNot=function(n,t,i){return e=!e,r.or(n,t,i)},this.not=function(n,t,i){return r.andNot(n,t,i)},this.and=function(n,t,i){return(a=" && ",n===undefined)?r:r._repeatCommand(n,t,i)},this.or=function(n,t,i){return(a=" || ",n===undefined)?r:r._repeatCommand(n,t,i)},this.orBegin=function(){return p++,r},this.orEnd=function(){return f!==null&&(f+=")"),r},this.isNot=function(n){return e=!e,r.is(n)},this.is=function(n){return r._append("this."+n),r._resetNegate(),r},this._compareValues=function(t,i,u,f,e){var s,o,h;if(s=l?"jQuery.jgrid.getAccessor(this,'"+i+"')":"this",u===undefined&&(u=null),o=u,h=e.stype===undefined?"text":e.stype,u!==null)switch(h){case"int":case"integer":o=isNaN(Number(o))||o===""?"0":o;s="parseInt("+s+",10)";o="parseInt("+o+",10)";break;case"float":case"number":case"numeric":o=String(o).replace(v,"");o=isNaN(Number(o))||o===""?"0":o;s="parseFloat("+s+")";o="parseFloat("+o+")";break;case"date":case"datetime":o=String(n.jgrid.parseDate(e.newfmt||"Y-m-d",o).getTime());s='jQuery.jgrid.parseDate("'+e.srcfmt+'",'+s+").getTime()";break;default:s=r._getStr(s);o=r._getStr('"'+r._toStr(o)+'"')}return r._append(s+" "+f+" "+o),r._setCommand(t,i),r._resetNegate(),r},this.equals=function(n,t,i){return r._compareValues(r.equals,n,t,"==",i)},this.notEquals=function(n,t,i){return r._compareValues(r.equals,n,t,"!==",i)},this.isNull=function(n,t,i){return r._compareValues(r.equals,n,null,"===",i)},this.greater=function(n,t,i){return r._compareValues(r.greater,n,t,">",i)},this.less=function(n,t,i){return r._compareValues(r.less,n,t,"<",i)},this.greaterOrEquals=function(n,t,i){return r._compareValues(r.greaterOrEquals,n,t,">=",i)},this.lessOrEquals=function(n,t,i){return r._compareValues(r.lessOrEquals,n,t,"<=",i)},this.startsWith=function(t,i){var f=i==null?t:i,u=o?n.trim(f.toString()).length:f.toString().length;return l?r._append(r._getStr("jQuery.jgrid.getAccessor(this,'"+t+"')")+".substr(0,"+u+") == "+r._getStr('"'+r._toStr(i)+'"')):(u=o?n.trim(i.toString()).length:i.toString().length,r._append(r._getStr("this")+".substr(0,"+u+") == "+r._getStr('"'+r._toStr(t)+'"'))),r._setCommand(r.startsWith,t),r._resetNegate(),r},this.endsWith=function(t,i){var u=i==null?t:i,f=o?n.trim(u.toString()).length:u.toString().length;return l?r._append(r._getStr("jQuery.jgrid.getAccessor(this,'"+t+"')")+".substr("+r._getStr("jQuery.jgrid.getAccessor(this,'"+t+"')")+".length-"+f+","+f+') == "'+r._toStr(i)+'"'):r._append(r._getStr("this")+".substr("+r._getStr("this")+'.length-"'+r._toStr(t)+'".length,"'+r._toStr(t)+'".length) == "'+r._toStr(t)+'"'),r._setCommand(r.endsWith,t),r._resetNegate(),r},this.contains=function(n,t){return l?r._append(r._getStr("jQuery.jgrid.getAccessor(this,'"+n+"')")+'.indexOf("'+r._toStr(t)+'",0) > -1'):r._append(r._getStr("this")+'.indexOf("'+r._toStr(n)+'",0) > -1'),r._setCommand(r.contains,n),r._resetNegate(),r},this.groupBy=function(n,t,i,f){return r._hasData()?r._getGroup(u,n,t,i,f):null},this.orderBy=function(t,i,u,f){return i=i==null?"a":n.trim(i.toString().toLowerCase()),u==null&&(u="text"),f==null&&(f="Y-m-d"),(i==="desc"||i==="descending")&&(i="d"),(i==="asc"||i==="ascending")&&(i="a"),s.push({by:t,dir:i,type:u,datefmt:f}),r},r};return new i(t,null)},getMethod:function(t){return this.getAccessor(n.fn.jqGrid,t)},extend:function(t){n.extend(n.fn.jqGrid,t);this.no_legacy_api||n.fn.extend(t)}});n(window).resize(function(){n(".ui-jqgrid").setGridWidth(n(".content").width()-20);n(".ui-jqgrid").setGridHeight(n.fn.gridHeight())});n.fn.gridHeight=function(){return n(window).width()>1600?n(window).height()-n("#list-top").height()-88:n(window).height()-n("#list-top").height()-66};n.fn.jqGrid=function(t){var i,r;if(typeof t=="string"){if(i=n.jgrid.getMethod(t),!i)throw"jqGrid - No such method: "+t;return r=n.makeArray(arguments).slice(1),i.apply(this,r)}return this.each(function(){var f,s,y,ht,k,wi,et,d,ni,ot,ti,st,o,a,ii,yt,ki;if(!this.grid){var u=n.extend(!0,{url:"",height:n.fn.gridHeight(),width:n(".content").width()-30,page:1,rowNum:100,rowTotal:null,records:0,pager:"#pager",pgbuttons:!0,pginput:!0,colModel:[],rowList:[50,100,150],colNames:[],sortorder:"desc",sortname:"",datatype:"json",mtype:"post",altRows:!0,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:function(){!localStorage.gridUrl||localStorage.gridUrl==location.href?gridFlag||typeof localStorage.grid=="undefined"||(gridFlag=!0,setTimeout(function(){var t=JSON.parse(localStorage.grid),i;n("#data").jqGrid("setGridParam",{postData:t,rowNum:t.rows,page:t.page}).trigger("reloadGrid");n(".ui-pg-selbox").val(t.rows);for(i in t)n.fn.select2?n("#"+i).val(t[i]).select2("val",t[i]):n("#"+i).val(t[i])},1)):(localStorage.removeItem("grid"),localStorage.removeItem("gridUrl"));gridFlag2&&(localStorage.grid=JSON.stringify(n("#data").getGridParam("postData")),localStorage.gridUrl=location.href);gridFlag2=!0},gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!0,loadonce:!1,multiselect:!0,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!0,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:30,gridview:!1,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus",displayField:[]},ignoreCase:!1,cmTemplate:{},idPrefix:"",multiSort:!1},n.jgrid.defaults,t||{}),i=this,r={headers:[],cols:[],footers:[],dragStart:function(t,r,f){var e=n(this.bDiv).offset().left;this.resizing={idx:t,startX:r.clientX,sOL:r.clientX-e};this.hDiv.style.cursor="col-resize";this.curGbox=n("#rs_m"+n.jgrid.jqID(u.id),"#gbox_"+n.jgrid.jqID(u.id));this.curGbox.css({display:"block",left:r.clientX-e,top:f[1],height:f[2]});n(i).triggerHandler("jqGridResizeStart",[r,t]);n.isFunction(u.resizeStart)&&u.resizeStart.call(i,r,t);document.onselectstart=function(){return!1}},dragMove:function(n){if(this.resizing){var t=n.clientX-this.resizing.startX,i=this.headers[this.resizing.idx],f=u.direction==="ltr"?i.width+t:i.width-t,r,e;f>33&&(this.curGbox.css({left:this.resizing.sOL+t}),u.forceFit===!0?(r=this.headers[this.resizing.idx+u.nv],e=u.direction==="ltr"?r.width-t:r.width+t,e>33&&(i.newWidth=f,r.newWidth=e)):(this.newWidth=u.direction==="ltr"?u.tblwidth+t:u.tblwidth-t,i.newWidth=f))}},dragEnd:function(){if(this.hDiv.style.cursor="default",this.resizing){var t=this.resizing.idx,r=this.headers[t].newWidth||this.headers[t].width;r=parseInt(r,10);this.resizing=!1;n("#rs_m"+n.jgrid.jqID(u.id)).css("display","none");u.colModel[t].width=r;this.headers[t].width=r;this.headers[t].el.style.width=r+"px";this.cols[t].style.width=r+"px";this.footers.length>0&&(this.footers[t].style.width=r+"px");u.forceFit===!0?(r=this.headers[t+u.nv].newWidth||this.headers[t+u.nv].width,this.headers[t+u.nv].width=r,this.headers[t+u.nv].el.style.width=r+"px",this.cols[t+u.nv].style.width=r+"px",this.footers.length>0&&(this.footers[t+u.nv].style.width=r+"px"),u.colModel[t+u.nv].width=r):(u.tblwidth=this.newWidth||u.tblwidth,n("table:first",this.bDiv).css("width",u.tblwidth+"px"),n("table:first",this.hDiv).css("width",u.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,u.footerrow&&(n("table:first",this.sDiv).css("width",u.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft));n(i).triggerHandler("jqGridResizeStop",[r,t]);n.isFunction(u.resizeStop)&&u.resizeStop.call(i,r,t)}this.curGbox=null;document.onselectstart=function(){return!0}},populateVisible:function(){var e,t,a,o;if(r.timer&&clearTimeout(r.timer),r.timer=null,e=n(r.bDiv).height(),e){if(t=n("table:first",r.bDiv),t[0].rows.length)try{a=t[0].rows[1];o=a?n(a).outerHeight()||r.prevRowHeight:r.prevRowHeight}catch(p){o=r.prevRowHeight}if(o){r.prevRowHeight=o;var y=u.rowNum,s=r.scrollTop=r.bDiv.scrollTop,h=Math.round(t.position().top)-s,c=h+t.height(),i=o*y,f,l,v;if(c<e&&h<=0&&(u.lastpage===undefined||parseInt((c+s+i-1)/i,10)<=u.lastpage)&&(l=parseInt((e-c+i-1)/i,10),c>=0||l<2||u.scroll===!0?(f=Math.round((c+s)/i)+1,h=-1):h=1),h>0&&(f=parseInt(s/i,10)+1,l=parseInt((s+e)/i,10)+2-f,v=!0),l){if(u.lastpage&&(f>u.lastpage||u.lastpage===1||f===u.page&&f===u.lastpage))return;r.hDiv.loading?r.timer=setTimeout(r.populateVisible,u.scrollTimeout):(u.page=f,v&&(r.selectionPreserver(t[0]),r.emptyRows.call(t[0],!1,!1)),r.populate(l))}}}},scrollGrid:function(n){if(u.scroll){var t=r.bDiv.scrollTop;r.scrollTop===undefined&&(r.scrollTop=0);t!==r.scrollTop&&(r.scrollTop=t,r.timer&&clearTimeout(r.timer),r.timer=setTimeout(r.populateVisible,u.scrollTimeout))}r.hDiv.scrollLeft=r.bDiv.scrollLeft;u.footerrow&&(r.sDiv.scrollLeft=r.bDiv.scrollLeft);n&&n.stopPropagation()},selectionPreserver:function(t){var i=t.p,u=i.selrow,r=i.selarrrow?n.makeArray(i.selarrrow):null,e=t.grid.bDiv.scrollLeft,f=function(){var o;if(i.selrow=null,i.selarrrow=[],i.multiselect&&r&&r.length>0)for(o=0;o<r.length;o++)r[o]!==u&&n(t).jqGrid("setSelection",r[o],!1,null);u&&n(t).jqGrid("setSelection",u,!1,null);t.grid.bDiv.scrollLeft=e;n(t).unbind(".selectionPreserver",f)};n(t).bind("jqGridGridComplete.selectionPreserver",f)}};if(this.tagName.toUpperCase()!=="TABLE"){alert("Element is not a table");return}if(document.documentMode!==undefined&&document.documentMode<=5){alert("Grid can not be used in this ('quirks') mode!");return}if(n(this).empty().attr("tabindex","0"),this.p=u,this.p.useProp=!!n.fn.prop,this.p.colNames.length===0)for(f=0;f<this.p.colModel.length;f++)this.p.colNames[f]=this.p.colModel[f].label||this.p.colModel[f].name;if(this.p.colNames.length!==this.p.colModel.length){alert(n.jgrid.errors.model);return}y=n("<div class='ui-jqgrid-view'><\/div>");ht=n.jgrid.msie;i.p.direction=n.trim(i.p.direction.toLowerCase());n.inArray(i.p.direction,["ltr","rtl"])===-1&&(i.p.direction="ltr");s=i.p.direction;n(y).insertBefore(this);n(this).removeClass("scroll").appendTo(y);k=n("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'><\/div>");n(k).attr({id:"gbox_"+this.id,dir:s}).insertBefore(y);n(y).attr("id","gview_"+this.id).appendTo(k);n("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'><\/div>").insertBefore(y);n("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"<\/div>").insertBefore(y);n(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var c=function(n,t){return(n=parseInt(n,10),isNaN(n))?t||0:n},nt=function(t,u,f,e,o,s){var c=i.p.colModel[t],y=c.align,l='style="',v=c.classes,p=c.name,a,h=[];return l+=y?"text-align:"+y+";":"text-align:center;",c.hidden===!0&&(l+="display:none;"),u===0?l+="width: "+r.headers[t].width+"px;":c.cellattr&&n.isFunction(c.cellattr)&&(a=c.cellattr.call(i,o,f,e,c,s),a&&typeof a=="string"&&(a=a.replace(/style/i,"style").replace(/title/i,"title"),a.indexOf("title")>-1&&(c.title=!1),a.indexOf("class")>-1&&(v=undefined),h=a.replace("-style","-sti").split(/style/),h.length===2?(h[1]=n.trim(h[1].replace("-sti","-style").replace("=","")),(h[1].indexOf("'")===0||h[1].indexOf('"')===0)&&(h[1]=h[1].substring(1)),l+=h[1].replace(/'/gi,'"')):l+='"')),h.length||(h[0]="",l+='"'),l+=(v!==undefined?' class="'+v+'"':"")+(c.title&&f?' title="'+n.jgrid.stripHtml(f)+'"':""),l+=' aria-describedby="'+i.p.id+"_"+p+'"',l+h[0]},ri=function(t){return t==null||t===""?"&#160;":i.p.autoencode?n.jgrid.htmlEncode(t):String(t)},ui=function(t,r,u,f,e){var o=i.p.colModel[u],s,h;return o.formatter!==undefined?(t=String(i.p.idPrefix)!==""?n.jgrid.stripPref(i.p.idPrefix,t):t,h={rowId:t,colModel:o,gid:i.p.id,pos:u},s=n.isFunction(o.formatter)?o.formatter.call(i,r,h,f,e):n.fmatter?n.fn.fmatter.call(i,o.formatter,r,h,f,e):ri(r)):s=ri(r),s},pt=function(n,t,i,r,u,f){var e,o;return e=ui(n,t,i,u,"add"),o=nt(i,r,e,u,n,f),'<td role="gridcell" '+o+">"+e+"<\/td>"},fi=function(n,t,r,u){var f='<input role="checkbox" type="checkbox" id="jqg_'+i.p.id+"_"+n+'" class="cbox" name="jqg_'+i.p.id+"_"+n+'"'+(u?'checked="checked"':"")+"/>",e=nt(t,r,"",null,n,!0);return'<td role="gridcell" '+e+">"+f+"<\/td>"},ei=function(n,t,i,r){var u=(parseInt(i,10)-1)*parseInt(r,10)+1+t,f=nt(n,t,u,null,t,!0);return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+f+">"+u+"<\/td>"},oi=function(n){for(var t,u=[],f=0,r=0;r<i.p.colModel.length;r++)t=i.p.colModel[r],t.name!=="cb"&&t.name!=="subgrid"&&t.name!=="rn"&&(u[f]=n==="local"?t.name:n==="xml"||n==="xmlstring"?t.xmlmap||t.name:t.jsonmap||t.name,i.p.keyIndex!==!1&&t.key===!0&&(i.p.keyName=u[f]),f++);return u},wt=function(t){var r=i.p.remapColumns;return r&&r.length||(r=n.map(i.p.colModel,function(n,t){return t})),t&&(r=n.map(r,function(n){return n<t?null:n-t})),r},tt=function(t,i){var r;this.p.deepempty?n(this.rows).slice(1).remove():(r=this.rows.length>0?this.rows[0]:null,n(this.firstChild).empty().append(r));t&&this.p.scroll&&(n(this.grid.bDiv.firstChild).css({height:"auto"}),n(this.grid.bDiv.firstChild.firstChild).css({height:0,display:"none"}),this.grid.bDiv.scrollTop!==0&&(this.grid.bDiv.scrollTop=0));i===!0&&this.p.treeGrid&&(this.p.data=[],this.p._index={})},bt=function(){for(var f=i.p.data.length,r,e=i.p.rownumbers===!0?1:0,o=i.p.multiselect===!0?1:0,s=i.p.subGrid===!0?1:0,u=i.p.keyIndex===!1||i.p.loadonce===!0?i.p.localReader.id:i.p.colModel[i.p.keyIndex+o+s+e].name,t=0;t<f;t++)r=n.jgrid.getAccessor(i.p.data[t],u),r===undefined&&(r=String(t+1)),i.p._index[r]=t},kt=function(t,r,u,f,e,o){var l="-1",a="",h,c=r?"display:none;":"",v="ui-widget-content jqgrow ui-row-"+i.p.direction+(u?" "+u:"")+(o?" ui-state-highlight":""),s=n(i).triggerHandler("jqGridRowAttr",[f,e,t]);if(typeof s!="object"&&(s=n.isFunction(i.p.rowattr)?i.p.rowattr.call(i,f,e,t):{}),!n.isEmptyObject(s)){s.hasOwnProperty("id")&&(t=s.id,delete s.id);s.hasOwnProperty("tabindex")&&(l=s.tabindex,delete s.tabindex);s.hasOwnProperty("style")&&(c+=s.style,delete s.style);s.hasOwnProperty("class")&&(v+=" "+s["class"],delete s["class"]);try{delete s.role}catch(y){}for(h in s)s.hasOwnProperty(h)&&(a+=" "+h+"="+s[h])}return'<tr role="row" id="'+t+'" tabindex="'+l+'" class="'+v+'"'+(c===""?"":' style="'+c+'"')+a+">"},dt=function(t,r,u,f,e){var ui=new Date,st=i.p.datatype!=="local"&&i.p.loadonce||i.p.datatype==="xmlstring",et="_id_",s=i.p.xmlReader,si=i.p.datatype==="local"?"local":"xml",g,gt,at,ni,ti,ii,ri;if(st&&(i.p.data=[],i.p._index={},i.p.localReader.id=et),i.p.reccount=0,n.isXMLDoc(t))i.p.treeANode!==-1||i.p.scroll?u=u>1?u:1:(tt.call(i,!1,!0),u=1);else return;var nt=n(i),y,ot,d=0,b,p=i.p.multiselect===!0?1:0,k=0,vt,v=i.p.rownumbers===!0?1:0,it,ct,rt=[],ft,o={},a,l,h=[],hi=i.p.altRows===!0?i.p.altclass:"",yt;i.p.subGrid===!0&&(k=1,vt=n.jgrid.getMethod("addSubGridCell"));s.repeatitems||(rt=oi(si));it=i.p.keyIndex===!1?n.isFunction(s.id)?s.id.call(i,t):s.id:i.p.keyIndex;rt.length>0&&!isNaN(it)&&(it=i.p.keyName);ct=String(it).indexOf("[")===-1?rt.length?function(t,i){return n(it,t).text()||i}:function(t,i){return n(s.cell,t).eq(it).text()||i}:function(n,t){return n.getAttribute(it.replace(/[\[\]]/g,""))||t};i.p.userData={};i.p.page=c(n.jgrid.getXmlData(t,s.page),i.p.page);i.p.lastpage=c(n.jgrid.getXmlData(t,s.total),1);i.p.records=c(n.jgrid.getXmlData(t,s.records));n.isFunction(s.userdata)?i.p.userData=s.userdata.call(i,t)||{}:n.jgrid.getXmlData(t,s.userdata,!0).each(function(){i.p.userData[this.getAttribute("name")]=n(this).text()});g=n.jgrid.getXmlData(t,s.root,!0);g=n.jgrid.getXmlData(g,s.row,!0);g||(g=[]);var ut=g.length,w=0,ht=[],lt=parseInt(i.p.rowNum,10),bt=i.p.scroll?n.jgrid.randId():1,dt;if(ut>0&&i.p.page<=0&&(i.p.page=1),g&&ut)for(e&&(lt*=e+1),gt=n.isFunction(i.p.afterInsertRow),at=!1,i.p.grouping&&(at=i.p.groupingView.groupCollapse===!0,ni=n.jgrid.getMethod("groupingPrepare"));w<ut;){if(a=g[w],l=ct(a,bt+w),l=i.p.idPrefix+l,dt=u===0?0:u+1,yt=(dt+w)%2==1?hi:"",ti=h.length,h.push(""),v&&h.push(ei(0,w,i.p.page,i.p.rowNum)),p&&h.push(fi(l,v,w,!1)),k&&h.push(vt.call(nt,p+v,w+u)),s.repeatitems)ft||(ft=wt(p+k+v)),ii=n.jgrid.getXmlData(a,s.cell,!0),n.each(ft,function(n){var t=ii[this];if(!t)return!1;b=t.textContent||t.text;o[i.p.colModel[n+p+k+v].name]=b;h.push(pt(l,b,n+p+k+v,w+u,a,o))});else for(y=0;y<rt.length;y++)b=n.jgrid.getXmlData(a,rt[y]),o[i.p.colModel[y+p+k+v].name]=b,h.push(pt(l,b,y+p+k+v,w+u,a,o));if(h[ti]=kt(l,at,yt,o,a,!1),h.push("<\/tr>"),i.p.grouping&&(ht=ni.call(nt,h,ht,o,w),h=[]),(st||i.p.treeGrid===!0)&&(o[et]=n.jgrid.stripPref(i.p.idPrefix,l),i.p.data.push(o),i.p._index[o[et]]=i.p.data.length-1),i.p.gridview===!1&&(n("tbody:first",r).append(h.join("")),nt.triggerHandler("jqGridAfterInsertRow",[l,o,a]),gt&&i.p.afterInsertRow.call(i,l,o,a),h=[]),o={},d++,w++,d===lt)break}if(i.p.gridview===!0&&(ot=i.p.treeANode>-1?i.p.treeANode:0,i.p.grouping?(nt.jqGrid("groupingRender",ht,i.p.colModel.length),ht=null):i.p.treeGrid===!0&&ot>0?n(i.rows[ot]).after(h.join("")):n("tbody:first",r).append(h.join(""))),i.p.subGrid===!0)try{nt.jqGrid("addSubGrid",p+v)}catch(ci){}if(i.p.totaltime=new Date-ui,d>0&&i.p.records===0&&(i.p.records=ut),h=null,i.p.treeGrid===!0)try{nt.jqGrid("setTreeNode",ot+1,d+ot+1)}catch(li){}if(i.p.treeGrid||i.p.scroll||(i.grid.bDiv.scrollTop=0),i.p.reccount=d,i.p.treeANode=-1,i.p.userDataOnFooter&&nt.jqGrid("footerData","set",i.p.userData,!0),st&&(i.p.records=ut,i.p.lastpage=Math.ceil(ut/lt)),f||i.updatepager(!1,!0),st)while(d<ut){if(a=g[d],l=ct(a,d+bt),l=i.p.idPrefix+l,s.repeatitems)ft||(ft=wt(p+k+v)),ri=n.jgrid.getXmlData(a,s.cell,!0),n.each(ft,function(n){var t=ri[this];if(!t)return!1;b=t.textContent||t.text;o[i.p.colModel[n+p+k+v].name]=b});else for(y=0;y<rt.length;y++)b=n.jgrid.getXmlData(a,rt[y]),o[i.p.colModel[y+p+k+v].name]=b;o[et]=n.jgrid.stripPref(i.p.idPrefix,l);i.p.data.push(o);i.p._index[o[et]]=i.p.data.length-1;o={};d++}},ct=function(t,r,u,f,e){var ci=new Date,h,ut,lt,ft,ot,hi,st;if(t)i.p.treeANode!==-1||i.p.scroll?u=u>1?u:1:(tt.call(i,!1,!0),u=1);else return;ut="_id_";ft=i.p.datatype!=="local"&&i.p.loadonce||i.p.datatype==="jsonstring";ft&&(i.p.data=[],i.p._index={},i.p.localReader.id=ut);i.p.reccount=0;i.p.datatype==="local"?(h=i.p.localReader,lt="local"):(h=i.p.jsonReader,lt="json");var it=n(i),k=0,at,p,w,ht=[],s,b=i.p.multiselect?1:0,d=i.p.subGrid===!0?1:0,dt,y=i.p.rownumbers===!0?1:0,gt=wt(b+d+y),vt=oi(lt),nt,rt,g,l,a={},et,o,v=[],li=i.p.altRows===!0?i.p.altclass:"",ni;i.p.page=c(n.jgrid.getAccessor(t,h.page),i.p.page);i.p.lastpage=c(n.jgrid.getAccessor(t,h.total),1);i.p.records=c(n.jgrid.getAccessor(t,h.records));i.p.userData=n.jgrid.getAccessor(t,h.userdata)||{};d&&(dt=n.jgrid.getMethod("addSubGridCell"));l=i.p.keyIndex===!1?n.isFunction(h.id)?h.id.call(i,t):h.id:i.p.keyIndex;h.repeatitems||(ht=vt,ht.length>0&&!isNaN(l)&&(l=i.p.keyName));g=n.jgrid.getAccessor(t,h.root);g==null&&n.isArray(t)&&(g=t);g||(g=[]);rt=g.length;p=0;rt>0&&i.p.page<=0&&(i.p.page=1);var yt=parseInt(i.p.rowNum,10),ti=i.p.scroll?n.jgrid.randId():1,ii,ri=!1,bt;e&&(yt*=e+1);i.p.datatype!=="local"||i.p.deselectAfterSort||(ri=!0);var ai=n.isFunction(i.p.afterInsertRow),ct=[],ui=!1,si;for(i.p.grouping&&(ui=i.p.groupingView.groupCollapse===!0,si=n.jgrid.getMethod("groupingPrepare"));p<rt;){for(s=g[p],o=n.jgrid.getAccessor(s,l),o===undefined&&(typeof l=="number"&&i.p.colModel[l+b+d+y]!=null&&(o=n.jgrid.getAccessor(s,i.p.colModel[l+b+d+y].name)),o===undefined&&(o=ti+p,ht.length===0&&h.cell&&(ot=n.jgrid.getAccessor(s,h.cell)||s,o=ot!=null&&ot[l]!==undefined?ot[l]:o,ot=null))),o=i.p.idPrefix+o,ii=u===1?0:u,ni=(ii+p)%2==1?li:"",ri&&(bt=i.p.multiselect?n.inArray(o,i.p.selarrrow)!==-1:o===i.p.selrow),hi=v.length,v.push(""),y&&v.push(ei(0,p,i.p.page,i.p.rowNum)),b&&v.push(fi(o,y,p,bt)),d&&v.push(dt.call(it,b+y,p+u)),nt=vt,h.repeatitems&&(h.cell&&(s=n.jgrid.getAccessor(s,h.cell)||s),n.isArray(s)&&(nt=gt)),w=0;w<nt.length;w++)at=n.jgrid.getAccessor(s,nt[w]),a[i.p.colModel[w+b+d+y].name]=at,v.push(pt(o,at,w+b+d+y,p+u,s,a));if(v[hi]=kt(o,ui,ni,a,s,bt),v.push("<\/tr>"),i.p.grouping&&(ct=si.call(it,v,ct,a,p),v=[]),(ft||i.p.treeGrid===!0)&&(a[ut]=n.jgrid.stripPref(i.p.idPrefix,o),i.p.data.push(a),i.p._index[a[ut]]=i.p.data.length-1),i.p.gridview===!1&&(n("#"+n.jgrid.jqID(i.p.id)+" tbody:first").append(v.join("")),it.triggerHandler("jqGridAfterInsertRow",[o,a,s]),ai&&i.p.afterInsertRow.call(i,o,a,s),v=[]),a={},k++,p++,k===yt)break}if(i.p.gridview===!0&&(et=i.p.treeANode>-1?i.p.treeANode:0,i.p.grouping?(it.jqGrid("groupingRender",ct,i.p.colModel.length),ct=null):i.p.treeGrid===!0&&et>0?n(i.rows[et]).after(v.join("")):n("#"+n.jgrid.jqID(i.p.id)+" tbody:first").append(v.join(""))),i.p.subGrid===!0)try{it.jqGrid("addSubGrid",b+y)}catch(vi){}if(i.p.totaltime=new Date-ci,k>0&&i.p.records===0&&(i.p.records=rt),v=null,i.p.treeGrid===!0)try{it.jqGrid("setTreeNode",et+1,k+et+1)}catch(yi){}if(i.p.treeGrid||i.p.scroll||(i.grid.bDiv.scrollTop=0),i.p.reccount=k,i.p.treeANode=-1,i.p.userDataOnFooter&&it.jqGrid("footerData","set",i.p.userData,!0),ft&&(i.p.records=rt,i.p.lastpage=Math.ceil(rt/yt)),f||i.updatepager(!1,!0),ft)while(k<rt&&g[k]){if(s=g[k],o=n.jgrid.getAccessor(s,l),o===undefined&&(typeof l=="number"&&i.p.colModel[l+b+d+y]!=null&&(o=n.jgrid.getAccessor(s,i.p.colModel[l+b+d+y].name)),o===undefined&&(o=ti+k,ht.length===0&&h.cell&&(st=n.jgrid.getAccessor(s,h.cell)||s,o=st!=null&&st[l]!==undefined?st[l]:o,st=null))),s){for(o=i.p.idPrefix+o,nt=vt,h.repeatitems&&(h.cell&&(s=n.jgrid.getAccessor(s,h.cell)||s),n.isArray(s)&&(nt=gt)),w=0;w<nt.length;w++)a[i.p.colModel[w+b+d+y].name]=n.jgrid.getAccessor(s,nt[w]);a[ut]=n.jgrid.stripPref(i.p.idPrefix,o);i.p.data.push(a);i.p._index[a[ut]]=i.p.data.length-1;a={}}k++}},di=function(){function nt(n){var f=0,i,e,s,o,u;if(n.groups!=null){for(e=n.groups.length&&n.groupOp.toString().toUpperCase()==="OR",e&&t.orBegin(),i=0;i<n.groups.length;i++){f>0&&e&&t.or();try{nt(n.groups[i])}catch(h){alert(h)}f++}e&&t.orEnd()}if(n.rules!=null)try{for(s=n.rules.length&&n.groupOp.toString().toUpperCase()==="OR",s&&t.orBegin(),i=0;i<n.rules.length;i++)u=n.rules[i],o=n.groupOp.toString().toUpperCase(),v[u.op]&&u.field&&(f>0&&o&&o==="OR"&&(t=t.or()),t=v[u.op](t,o)(u.field,u.data,r[u.field])),f++;s&&t.orEnd()}catch(c){alert(c)}}var f=i.p.multiSort?[]:"",d=[],y=!1,r={},p=[],g=[],c,s,l,a,w,u,v,t,e;if(n.isArray(i.p.data)){if(a=i.p.grouping?i.p.groupingView:!1,n.each(i.p.colModel,function(){var t,e;if(s=this.sorttype||"text",s==="date"||s==="datetime"?(this.formatter&&typeof this.formatter=="string"&&this.formatter==="date"?(c=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:n.jgrid.formatter.date.srcformat,l=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:n.jgrid.formatter.date.newformat):c=l=this.datefmt||"Y-m-d",r[this.name]={stype:s,srcfmt:c,newfmt:l}):r[this.name]={stype:s,srcfmt:"",newfmt:""},i.p.grouping)for(u=0,w=a.groupField.length;u<w;u++)this.name===a.groupField[u]&&(t=this.name,this.index&&(t=this.index),p[u]=r[t],g[u]=t);i.p.multiSort?this.lso&&(f.push(this.name),e=this.lso.split("-"),d.push(e[e.length-1])):y||this.index!==i.p.sortname&&this.name!==i.p.sortname||(f=this.name,y=!0)}),i.p.treeGrid){n(i).jqGrid("SortTree",f,i.p.sortorder,r[f].stype||"text",r[f].srcfmt||"");return}if(v={eq:function(n){return n.equals},ne:function(n){return n.notEquals},lt:function(n){return n.less},le:function(n){return n.lessOrEquals},gt:function(n){return n.greater},ge:function(n){return n.greaterOrEquals},cn:function(n){return n.contains},nc:function(n,t){return t==="OR"?n.orNot().contains:n.andNot().contains},bw:function(n){return n.startsWith},bn:function(n,t){return t==="OR"?n.orNot().startsWith:n.andNot().startsWith},en:function(n,t){return t==="OR"?n.orNot().endsWith:n.andNot().endsWith},ew:function(n){return n.endsWith},ni:function(n,t){return t==="OR"?n.orNot().equals:n.andNot().equals},"in":function(n){return n.equals},nu:function(n){return n.isNull},nn:function(n,t){return t==="OR"?n.orNot().isNull:n.andNot().isNull}},t=n.jgrid.from(i.p.data),i.p.ignoreCase&&(t=t.ignoreCase()),i.p.search===!0)if(e=i.p.postData.filters,e)typeof e=="string"&&(e=n.jgrid.parse(e)),nt(e);else try{t=v[i.p.postData.searchOper](t)(i.p.postData.searchField,i.p.postData.searchString,r[i.p.postData.searchField])}catch(rt){}if(i.p.grouping)for(u=0;u<w;u++)t.orderBy(g[u],a.groupOrder[u],p[u].stype,p[u].srcfmt);i.p.multiSort?n.each(f,function(n){t.orderBy(this,d[n],r[this].stype,r[this].srcfmt)}):f&&i.p.sortorder&&y&&(i.p.sortorder.toUpperCase()==="DESC"?t.orderBy(i.p.sortname,"d",r[f].stype,r[f].srcfmt):t.orderBy(i.p.sortname,"a",r[f].stype,r[f].srcfmt));var h=t.select(),b=parseInt(i.p.rowNum,10),tt=h.length,k=parseInt(i.p.page,10),it=Math.ceil(tt/b),o={};return h=h.slice((k-1)*b,k*b),t=null,r=null,o[i.p.localReader.total]=it,o[i.p.localReader.page]=k,o[i.p.localReader.records]=tt,o[i.p.localReader.root]=h,o[i.p.localReader.userdata]=i.p.userData,h=null,o}},gi=function(t,r){var s,w,u,v,h,y,l,o="",k,f=i.p.pager?"_"+n.jgrid.jqID(i.p.pager.substr(1)):"",e=i.p.toppager?"_"+i.p.toppager.substr(1):"",p,a,b,d;u=parseInt(i.p.page,10)-1;u<0&&(u=0);u=u*parseInt(i.p.rowNum,10);h=u+i.p.reccount;i.p.scroll&&(p=n("tbody:first > tr:gt(0)",i.grid.bDiv),u=h-p.length,i.p.reccount=p.length,a=p.outerHeight()||i.grid.prevRowHeight,a&&(b=u*a,d=parseInt(i.p.records,10)*a,n(">div:first",i.grid.bDiv).css({height:d}).children("div:first").css({height:b,display:b?"":"none"}),i.grid.bDiv.scrollTop==0&&i.p.page>1&&(i.grid.bDiv.scrollTop=i.p.rowNum*(i.p.page-1)*a)),i.grid.bDiv.scrollLeft=i.grid.hDiv.scrollLeft);o=i.p.pager||"";o+=i.p.toppager?o?","+i.p.toppager:i.p.toppager:"";o&&(l=n.jgrid.formatter.integer||{},s=c(i.p.page),w=c(i.p.lastpage),n(".selbox",o)[this.p.useProp?"prop":"attr"]("disabled",!1),i.p.pginput===!0&&(n(".ui-pg-input",o).val(i.p.page),k=i.p.toppager?"#sp_1"+f+",#sp_1"+e:"#sp_1"+f,n(k).html(n.fmatter?n.fmatter.util.NumberFormat(i.p.lastpage,l):i.p.lastpage)),i.p.viewrecords&&(i.p.reccount===0?n(".ui-paging-info",o).html(i.p.emptyrecords):(v=u+1,y=i.p.records,n.fmatter&&(v=n.fmatter.util.NumberFormat(v,l),h=n.fmatter.util.NumberFormat(h,l),y=n.fmatter.util.NumberFormat(y,l)),n(".ui-paging-info",o).html(n.jgrid.format(i.p.recordtext,v,h,y)))),i.p.pgbuttons===!0&&(s<=0&&(s=w=0),s===1||s===0?(n("#first"+f+", #prev"+f).addClass("ui-state-disabled").removeClass("ui-state-hover"),i.p.toppager&&n("#first_t"+e+", #prev_t"+e).addClass("ui-state-disabled").removeClass("ui-state-hover")):(n("#first"+f+", #prev"+f).removeClass("ui-state-disabled"),i.p.toppager&&n("#first_t"+e+", #prev_t"+e).removeClass("ui-state-disabled")),s===w||s===0?(n("#next"+f+", #last"+f).addClass("ui-state-disabled").removeClass("ui-state-hover"),i.p.toppager&&n("#next_t"+e+", #last_t"+e).addClass("ui-state-disabled").removeClass("ui-state-hover")):(n("#next"+f+", #last"+f).removeClass("ui-state-disabled"),i.p.toppager&&n("#next_t"+e+", #last_t"+e).removeClass("ui-state-disabled"))));t===!0&&i.p.rownumbers===!0&&n(">td.jqgrid-rownum",i.rows).each(function(t){n(this).html(u+1+t)});r&&i.p.jqgdnd&&n(i).jqGrid("gridDnD","updateDnD");n(i).triggerHandler("jqGridGridComplete");n.isFunction(i.p.gridComplete)&&i.p.gridComplete.call(i);n(i).triggerHandler("jqGridAfterGridComplete")},it=function(){if(i.grid.hDiv.loading=!0,!i.p.hiddengrid)switch(i.p.loadui){case"enable":n("#load_"+n.jgrid.jqID(i.p.id)).show();break;case"block":n("#lui_"+n.jgrid.jqID(i.p.id)).show();n("#load_"+n.jgrid.jqID(i.p.id)).show()}},w=function(){i.grid.hDiv.loading=!1;switch(i.p.loadui){case"enable":n("#load_"+n.jgrid.jqID(i.p.id)).hide();break;case"block":n("#lui_"+n.jgrid.jqID(i.p.id)).hide();n("#load_"+n.jgrid.jqID(i.p.id)).hide()}},p=function(t){var y,h,k,b,c,e,l;if(!i.grid.hDiv.loading){var d=i.p.scroll&&t===!1,u={},a,f,r=i.p.prmNames;i.p.page<=0&&(i.p.page=Math.min(1,i.p.lastpage));r.search!==null&&(u[r.search]=i.p.search);r.nd!==null&&(u[r.nd]=(new Date).getTime());r.rows!==null&&(u[r.rows]=i.p.rowNum);r.page!==null&&(u[r.page]=i.p.page);r.sort!==null&&(u[r.sort]=i.p.sortname);r.order!==null&&(u[r.order]=i.p.sortorder);i.p.rowTotal!==null&&r.totalrows!==null&&(u[r.totalrows]=i.p.rowTotal);var v=n.isFunction(i.p.loadComplete),o=v?i.p.loadComplete:null,s=0;if(t=t||1,t>1?r.npage!==null?(u[r.npage]=t,s=t-1,t=1):o=function(n){i.p.page++;i.grid.hDiv.loading=!1;v&&i.p.loadComplete.call(i,n);p(t-1)}:r.npage!==null&&delete i.p.postData[r.npage],i.p.grouping){for(n(i).jqGrid("groupingSetup"),y=i.p.groupingView,k="",h=0;h<y.groupField.length;h++)b=y.groupField[h],n.each(i.p.colModel,function(n,t){t.name===b&&t.index&&(b=t.index)}),k+=b+" "+y.groupOrder[h]+", ";u[r.sort]=k+u[r.sort]}if(n.extend(i.p.postData,u),c=i.p.scroll?i.rows.length-1:1,e=n(i).triggerHandler("jqGridBeforeRequest"),e===!1||e==="stop")return;if(n.isFunction(i.p.datatype)){i.p.datatype.call(i,i.p.postData,"load_"+i.p.id,c,t,s);return}if(n.isFunction(i.p.beforeRequest)&&(e=i.p.beforeRequest.call(i),e===undefined&&(e=!0),e===!1))return;a=i.p.datatype.toLowerCase();switch(a){case"json":case"jsonp":case"xml":case"script":n.ajax(n.extend({url:i.p.url,type:i.p.mtype,dataType:a,data:n.isFunction(i.p.serializeGridData)?i.p.serializeGridData.call(i,i.p.postData):i.p.postData,success:function(r,u,f){if(n.isFunction(i.p.beforeProcessing)&&i.p.beforeProcessing.call(i,r,u,f)===!1){w();return}a==="xml"?dt(r,i.grid.bDiv,c,t>1,s):ct(r,i.grid.bDiv,c,t>1,s);n(i).triggerHandler("jqGridLoadComplete",[r]);o&&o.call(i,r);n(i).triggerHandler("jqGridAfterLoadComplete",[r]);d&&i.grid.populateVisible();(i.p.loadonce||i.p.treeGrid)&&(i.p.datatype="local");r=null;t===1&&w()},error:function(r,u,f){n.isFunction(i.p.loadError)&&i.p.loadError.call(i,r,u,f);t===1&&w();r=null},beforeSend:function(t,r){var u=!0;if(n.isFunction(i.p.loadBeforeSend)&&(u=i.p.loadBeforeSend.call(i,t,r)),u===undefined&&(u=!0),u===!1)return!1;it()}},n.jgrid.ajaxOptions,i.p.ajaxGridOptions));break;case"xmlstring":it();f=typeof i.p.datastr!="string"?i.p.datastr:n.parseXML(i.p.datastr);dt(f,i.grid.bDiv);n(i).triggerHandler("jqGridLoadComplete",[f]);v&&i.p.loadComplete.call(i,f);n(i).triggerHandler("jqGridAfterLoadComplete",[f]);i.p.datatype="local";i.p.datastr=null;w();break;case"jsonstring":it();f=typeof i.p.datastr=="string"?n.jgrid.parse(i.p.datastr):i.p.datastr;ct(f,i.grid.bDiv);n(i).triggerHandler("jqGridLoadComplete",[f]);v&&i.p.loadComplete.call(i,f);n(i).triggerHandler("jqGridAfterLoadComplete",[f]);i.p.datatype="local";i.p.datastr=null;w();break;case"local":case"clientside":it();i.p.datatype="local";l=di();ct(l,i.grid.bDiv,c,t>1,s);n(i).triggerHandler("jqGridLoadComplete",[l]);o&&o.call(i,l);n(i).triggerHandler("jqGridAfterLoadComplete",[l]);d&&i.grid.populateVisible();w()}}},lt=function(t){n("#cb_"+n.jgrid.jqID(i.p.id),i.grid.hDiv)[i.p.useProp?"prop":"attr"]("checked",t);var r=i.p.frozenColumns?i.p.id+"_frozen":"";r&&n("#cb_"+n.jgrid.jqID(i.p.id),i.grid.fhDiv)[i.p.useProp?"prop":"attr"]("checked",t)},si=function(t,r){var y="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'><\/span><\/td>",e="",u="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",o="",f,w,b,k,h,d,l,v=function(t){var r;return(n.isFunction(i.p.onPaging)&&(r=i.p.onPaging.call(i,t)),r==="stop")?!1:(i.p.selrow=null,i.p.multiselect&&(i.p.selarrrow=[],lt(!1)),i.p.savedRow=[],!0)},a;if(t=t.substr(1),r+="_"+t,f="pg_"+t,w=t+"_left",b=t+"_center",k=t+"_right",n("#"+n.jgrid.jqID(t)).append("<div id='"+f+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+w+"' align='left'><\/td><td id='"+b+"' align='center' style='white-space:pre;'><\/td><td id='"+k+"' align='right'><\/td><\/tr><\/tbody><\/table><\/div>").attr("dir","ltr"),i.p.rowList.length>0){for(o="<td dir='"+s+"'>",o+="<select class='ui-pg-selbox form-sel' role='listbox'>",l=0;l<i.p.rowList.length;l++)o+='<option role="option" value="'+i.p.rowList[l]+'"'+(i.p.rowNum===i.p.rowList[l]?' selected="selected"':"")+">"+i.p.rowList[l]+"<\/option>";o+="<\/select><\/td>"}s==="rtl"&&(u+=o);i.p.pginput===!0&&(e="<td dir='"+s+"'>"+n.jgrid.format(i.p.pgtext||"","<input class='ui-pg-input form-text width40' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+n.jgrid.jqID(t)+"'><\/span>")+"<\/td>");i.p.pgbuttons===!0?(a=["first"+r,"prev"+r,"next"+r,"last"+r],s==="rtl"&&a.reverse(),u+="<td id='"+a[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'><\/span><\/td>",u+="<td id='"+a[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'><\/span><\/td>",u+=e!==""?y+e+y:"",u+="<td id='"+a[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'><\/span><\/td>",u+="<td id='"+a[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'><\/span><\/td>"):e!==""&&(u+=e);s==="ltr"&&(u+=o);u+="<\/tr><\/tbody><\/table>";i.p.viewrecords===!0&&n("td#"+t+"_"+i.p.recordpos,"#"+f).append("<div dir='"+s+"' style='text-align:"+i.p.recordpos+"' class='ui-paging-info'><\/div>");n("td#"+t+"_"+i.p.pagerpos,"#"+f).append(u);d=n(".ui-jqgrid").css("font-size")||"11px";n(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+d+";visibility:hidden;' ><\/div>");h=n(u).clone().appendTo("#testpg").width();n("#testpg").remove();h>0&&(e!==""&&(h+=50),n("td#"+t+"_"+i.p.pagerpos,"#"+f).width(h));i.p._nvtd=[];i.p._nvtd[0]=h?Math.floor((i.p.width-h)/2):Math.floor(i.p.width/3);i.p._nvtd[1]=0;u=null;n(".ui-pg-selbox","#"+f).bind("change",function(){return v("records")?(i.p.page=Math.round(i.p.rowNum*(i.p.page-1)/this.value-.5)+1,i.p.rowNum=this.value,i.p.pager&&n(".ui-pg-selbox",i.p.pager).val(this.value),i.p.toppager&&n(".ui-pg-selbox",i.p.toppager).val(this.value),p(),!1):!1});i.p.pgbuttons===!0&&(n(".ui-pg-button","#"+f).hover(function(){n(this).hasClass("ui-state-disabled")?this.style.cursor="default":(n(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){n(this).hasClass("ui-state-disabled")||(n(this).removeClass("ui-state-hover"),this.style.cursor="default")}),n("#first"+n.jgrid.jqID(r)+", #prev"+n.jgrid.jqID(r)+", #next"+n.jgrid.jqID(r)+", #last"+n.jgrid.jqID(r)).click(function(){var n=c(i.p.page,1),t=c(i.p.lastpage,1),u=!1,o=!0,s=!0,f=!0,e=!0;return(t===0||t===1?(o=!1,s=!1,f=!1,e=!1):t>1&&n>=1?n===1?(o=!1,s=!1):n===t&&(f=!1,e=!1):t>1&&n===0&&(f=!1,e=!1,n=t-1),!v(this.id))?!1:(this.id==="first"+r&&o&&(i.p.page=1,u=!0),this.id==="prev"+r&&s&&(i.p.page=n-1,u=!0),this.id==="next"+r&&f&&(i.p.page=n+1,u=!0),this.id==="last"+r&&e&&(i.p.page=t,u=!0),u&&p(),!1)}));i.p.pginput===!0&&n("input.ui-pg-input","#"+f).keypress(function(t){var r=t.charCode||t.keyCode||0;return r===13?v("user")?(n(this).val(c(n(this).val(),1)),i.p.page=n(this).val()>0?n(this).val():i.p.page,p(),!1):!1:this})},nr=function(t,r){var o,f="",u=i.p.colModel,h=!1,c,e=i.p.frozenColumns?r:i.grid.headers[t].el,s="";n("span.ui-grid-ico-sort",e).addClass("ui-state-disabled");n(e).attr("aria-selected","false");u[t].lso?u[t].lso==="asc"?(u[t].lso+="-desc",s="desc"):u[t].lso==="desc"?(u[t].lso+="-asc",s="asc"):(u[t].lso==="asc-desc"||u[t].lso==="desc-asc")&&(u[t].lso=""):u[t].lso=s=u[t].firstsortorder||"asc";s?(n("span.s-ico",e).show(),n("span.ui-icon-"+s,e).removeClass("ui-state-disabled"),n(e).attr("aria-selected","true")):i.p.viewsortcols[0]||n("span.s-ico",e).hide();i.p.sortorder="";n.each(u,function(n){this.lso&&(n>0&&h&&(f+=", "),o=this.lso.split("-"),f+=u[n].index||u[n].name,f+=" "+o[o.length-1],h=!0,i.p.sortorder=o[o.length-1])});c=f.lastIndexOf(i.p.sortorder);f=f.substring(0,c);i.p.sortname=f},hi=function(t,r,u,f,e){var o,s,h;if(i.p.colModel[r].sortable&&!(i.p.savedRow.length>0)){if(u||(i.p.lastsort===r?i.p.sortorder==="asc"?i.p.sortorder="desc":i.p.sortorder==="desc"&&(i.p.sortorder="asc"):i.p.sortorder=i.p.colModel[r].firstsortorder||"asc",i.p.page=1),i.p.multiSort)nr(r,e);else{if(f){if(i.p.lastsort===r&&i.p.sortorder===f&&!u)return;i.p.sortorder=f}o=i.grid.headers[i.p.lastsort].el;s=i.p.frozenColumns?e:i.grid.headers[r].el;n("span.ui-grid-ico-sort",o).addClass("ui-state-disabled");n(o).attr("aria-selected","false");i.p.frozenColumns&&(i.grid.fhDiv.find("span.ui-grid-ico-sort").addClass("ui-state-disabled"),i.grid.fhDiv.find("th").attr("aria-selected","false"));n("span.ui-icon-"+i.p.sortorder,s).removeClass("ui-state-disabled");n(s).attr("aria-selected","true");i.p.viewsortcols[0]||i.p.lastsort!==r&&(i.p.frozenColumns&&i.grid.fhDiv.find("span.s-ico").hide(),n("span.s-ico",o).hide(),n("span.s-ico",s).show());t=t.substring(5+i.p.id.length+1);i.p.sortname=i.p.colModel[r].index||t}if(n(i).triggerHandler("jqGridSortCol",[i.p.sortname,r,i.p.sortorder])==="stop"){i.p.lastsort=r;return}if(n.isFunction(i.p.onSortCol)&&i.p.onSortCol.call(i,i.p.sortname,r,i.p.sortorder)==="stop"){i.p.lastsort=r;return}i.p.datatype==="local"?i.p.deselectAfterSort&&n(i).jqGrid("resetSelection"):(i.p.selrow=null,i.p.multiselect&&lt(!1),i.p.selarrrow=[],i.p.savedRow=[]);i.p.scroll&&(h=i.grid.bDiv.scrollLeft,tt.call(i,!0,!1),i.grid.hDiv.scrollLeft=h);i.p.subGrid&&i.p.datatype==="local"&&n("td.sgexpanded","#"+n.jgrid.jqID(i.p.id)).each(function(){n(this).trigger("click")});p();i.p.lastsort=r;i.p.sortname!==t&&r&&(i.p.lastsort=r)}},tr=function(){var t=0,u=n.jgrid.cell_width?0:c(i.p.cellLayout,0),f=0,l,h=c(i.p.scrollOffset,0),o,a=!1,v,e=0,s;n.each(i.p.colModel,function(){if(this.hidden===undefined&&(this.hidden=!1),i.p.grouping&&i.p.autowidth){var r=n.inArray(this.name,i.p.groupingView.groupField);r>=0&&i.p.groupingView.groupColumnShow.length>r&&(this.hidden=!i.p.groupingView.groupColumnShow[r])}this.widthOrg=o=c(this.width,0);this.hidden===!1&&(t+=o+u,this.fixed?e+=o+u:f++)});isNaN(i.p.width)&&(i.p.width=t+(i.p.shrinkToFit===!1&&!isNaN(i.p.height)?h:0));r.width=i.p.width;i.p.tblwidth=t;i.p.shrinkToFit===!1&&i.p.forceFit===!0&&(i.p.forceFit=!1);i.p.shrinkToFit===!0&&f>0&&(v=r.width-u*f-e,isNaN(i.p.height)||(v-=h,a=!0),t=0,n.each(i.p.colModel,function(n){this.hidden!==!1||this.fixed||(o=Math.round(v*this.width/(i.p.tblwidth-u*f-e)),this.width=o,t+=o,l=n)}),s=0,a?r.width-e-(t+u*f)!==h&&(s=r.width-e-(t+u*f)-h):a||Math.abs(r.width-e-(t+u*f))===1||(s=r.width-e-(t+u*f)),i.p.colModel[l].width+=s,i.p.tblwidth=t+s+u*f+e,i.p.tblwidth>i.p.width&&(i.p.colModel[l].width-=i.p.tblwidth-parseInt(i.p.width,10),i.p.tblwidth=i.p.width))},ir=function(n){for(var u=n,r=n,t=n+1;t<i.p.colModel.length;t++)if(i.p.colModel[t].hidden!==!0){r=t;break}return r-u},rr=function(t){var u=n(i.grid.headers[t].el),r=[u.position().left+u.outerWidth()];return i.p.direction==="rtl"&&(r[0]=i.p.width-r[0]),r[0]-=i.grid.bDiv.scrollLeft,r.push(n(i.grid.hDiv).position().top),r.push(n(i.grid.bDiv).offset().top-n(i.grid.hDiv).offset().top+n(i.grid.bDiv).height()),r},ci=function(t){for(var u=i.grid.headers,f=n.jgrid.getCellIndex(t),r=0;r<u.length;r++)if(t===u[r].el){f=r;break}return f};for(this.p.id=this.id,n.inArray(i.p.multikey,["shiftKey","altKey","ctrlKey"])===-1&&(i.p.multikey=!1),i.p.keyIndex=!1,i.p.keyName=!1,f=0;f<i.p.colModel.length;f++)i.p.colModel[f]=n.extend(!0,{},i.p.cmTemplate,i.p.colModel[f].template||{},i.p.colModel[f]),i.p.keyIndex===!1&&i.p.colModel[f].key===!0&&(i.p.keyIndex=f);if(i.p.sortorder=i.p.sortorder.toLowerCase(),n.jgrid.cell_width=n.jgrid.cellWidth(),i.p.grouping===!0&&(i.p.scroll=!1,i.p.rownumbers=!1,i.p.treeGrid=!1,i.p.gridview=!0),this.p.treeGrid===!0){try{n(this).jqGrid("setTreeGrid")}catch(ur){}i.p.datatype!=="local"&&(i.p.localReader={id:"_id_"})}if(this.p.subGrid)try{n(i).jqGrid("setSubGrid")}catch(fr){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:n.jgrid.cell_width?i.p.multiselectWidth+i.p.cellLayout:i.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:i.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));i.p.xmlReader=n.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},i.p.xmlReader);i.p.jsonReader=n.extend(!0,{root:"rows",page:"page",total:"totalPage",records:"totalCount",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!1,cell:"cell"}},i.p.jsonReader);i.p.localReader=n.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},i.p.localReader);i.p.scroll&&(i.p.pgbuttons=!1,i.p.pginput=!1,i.p.rowList=[]);i.p.data.length&&bt();var v="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",li,gt,rt,ut,at,h,e,ai,vt,vi="",yi="",ft=[],pi=[],b=[];if(i.p.shrinkToFit===!0&&i.p.forceFit===!0)for(f=i.p.colModel.length-1;f>=0;f--)if(!i.p.colModel[f].hidden){i.p.colModel[f].resizable=!1;break}if(i.p.viewsortcols[1]==="horizontal"&&(vi=" ui-i-asc",yi=" ui-i-desc"),li=ht?"class='ui-th-div-ie'":"",vt="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+vi+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+s+"'><\/span>",vt+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+yi+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+s+"'><\/span><\/span>",i.p.multiSort)for(ft=i.p.sortname.split(","),f=0;f<ft.length;f++)b=n.trim(ft[f]).split(" "),ft[f]=n.trim(b[0]),pi[f]=b[1]?n.trim(b[1]):i.p.sortorder||"asc";for(f=0;f<this.p.colNames.length;f++)wi=i.p.headertitles?' title="'+n.jgrid.stripHtml(i.p.colNames[f])+'"':"",v+="<th id='"+i.p.id+"_"+i.p.colModel[f].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+s+"'"+wi+">",gt=i.p.colModel[f].index||i.p.colModel[f].name,v+="<div id='jqgh_"+i.p.id+"_"+i.p.colModel[f].name+"' "+li+">"+i.p.colNames[f],i.p.colModel[f].width=i.p.colModel[f].width?parseInt(i.p.colModel[f].width,10):150,typeof i.p.colModel[f].title!="boolean"&&(i.p.colModel[f].title=!0),i.p.colModel[f].lso="",gt===i.p.sortname&&(i.p.lastsort=f),i.p.multiSort&&(b=n.inArray(gt,ft),b!==-1&&(i.p.colModel[f].lso=pi[b])),v+=vt+"<\/div><\/th>";if(v+="<\/tr><\/thead>",vt=null,n(this).append(v),n("thead tr:first th",this).hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}),this.p.multiselect&&(et=[],n("#cb_"+n.jgrid.jqID(i.p.id),this).bind("click",function(){i.p.selarrrow=[];var t=i.p.frozenColumns===!0?i.p.id+"_frozen":"";this.checked?(n(i.rows).each(function(r){r>0&&(n(this).hasClass("ui-subgrid")||n(this).hasClass("jqgroup")||n(this).hasClass("ui-state-disabled")||(n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(this.id))[i.p.useProp?"prop":"attr"]("checked",!0),n(this).addClass("ui-state-highlight").attr("aria-selected","true"),i.p.selarrrow.push(this.id),i.p.selrow=this.id,t&&(n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(this.id),i.grid.fbDiv)[i.p.useProp?"prop":"attr"]("checked",!0),n("#"+n.jgrid.jqID(this.id),i.grid.fbDiv).addClass("ui-state-highlight"))))}),d=!0,et=[]):(n(i.rows).each(function(r){r>0&&(n(this).hasClass("ui-subgrid")||n(this).hasClass("ui-state-disabled")||(n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(this.id))[i.p.useProp?"prop":"attr"]("checked",!1),n(this).removeClass("ui-state-highlight").attr("aria-selected","false"),et.push(this.id),t&&(n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(this.id),i.grid.fbDiv)[i.p.useProp?"prop":"attr"]("checked",!1),n("#"+n.jgrid.jqID(this.id),i.grid.fbDiv).removeClass("ui-state-highlight"))))}),i.p.selrow=null,d=!1);n(i).triggerHandler("jqGridSelectAll",[d?i.p.selarrrow:et,d]);n.isFunction(i.p.onSelectAll)&&i.p.onSelectAll.call(i,d?i.p.selarrrow:et,d)})),i.p.autowidth===!0&&(ni=n(k).innerWidth(),i.p.width=ni>0?ni:"nw"),tr(),n(k).css("width",r.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+i.p.id+"'>&#160;<\/div>"),n(y).css("width",r.width+"px"),v=n("thead:first",i).get(0),ot="",i.p.footerrow&&(ot+="<table role='grid' style='width:"+i.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+s+"'>"),ti=n("tr:first",v),st="<tr class='jqgfirstrow' role='row' style='height:auto'>",i.p.disableClick=!1,n("th",ti).each(function(t){var f,u;rt=i.p.autowidth?i.p.colModel[t].width:i.p.colModel[t].widthOrg;i.p.colModel[t].resizable===undefined&&(i.p.colModel[t].resizable=!0);i.p.colModel[t].resizable?(ut=document.createElement("span"),n(ut).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+s).css("cursor","col-resize"),n(this).addClass(i.p.resizeclass)):ut="";n(this).css("width",rt+"px").prepend(ut);ut=null;f="";i.p.colModel[t].hidden&&(n(this).css("display","none"),f="display:none;");st+="<td role='gridcell' style='height:0px;width:"+rt+"px;"+f+"'><\/td>";r.headers[t]={width:rt,el:this};at=i.p.colModel[t].sortable;typeof at!="boolean"&&(i.p.colModel[t].sortable=!1,at=!1);u=i.p.colModel[t].name;u==="cb"||u==="subgrid"||u==="rn"||i.p.viewsortcols[2]&&n(">div",this).addClass("ui-jqgrid-sortable");at&&(i.p.multiSort?i.p.viewsortcols[0]?(n("div span.s-ico",this).show(),i.p.colModel[t].lso&&n("div span.ui-icon-"+i.p.colModel[t].lso,this).removeClass("ui-state-disabled")):i.p.colModel[t].lso&&(n("div span.s-ico",this).show(),n("div span.ui-icon-"+i.p.colModel[t].lso,this).removeClass("ui-state-disabled")):i.p.viewsortcols[0]?(n("div span.s-ico",this).show(),t===i.p.lastsort&&n("div span.ui-icon-"+i.p.sortorder,this).removeClass("ui-state-disabled")):t===i.p.lastsort&&(n("div span.s-ico",this).show(),n("div span.ui-icon-"+i.p.sortorder,this).removeClass("ui-state-disabled")));i.p.footerrow&&(ot+="<td role='gridcell' "+nt(t,0,"",null,"",!1)+">&#160;<\/td>")}).mousedown(function(t){if(n(t.target).closest("th>span.ui-jqgrid-resize").length===1){var u=ci(this);return i.p.forceFit===!0&&(i.p.nv=ir(u)),r.dragStart(u,t,rr(u)),!1}}).click(function(t){var u,e,o,f,r,s;return i.p.disableClick?(i.p.disableClick=!1,!1):(u="th>div.ui-jqgrid-sortable",i.p.viewsortcols[2]||(u="th>div>span>span.ui-grid-ico-sort"),f=n(t.target).closest(u),f.length!==1)?void 0:(i.p.frozenColumns?(s=n(this)[0].id.substring(i.p.id.length+1),n(i.p.colModel).each(function(n){if(this.name===s)return r=n,!1})):r=ci(this),i.p.viewsortcols[2]||(e=!0,o=f.attr("sort")),r!=null&&hi(n("div",this)[0].id,r,e,o,this),!1)}),i.p.sortable&&n.fn.sortable)try{n(i).jqGrid("sortableColumns",ti)}catch(er){}i.p.footerrow&&(ot+="<\/tr><\/tbody><\/table>");st+="<\/tr>";ai=document.createElement("tbody");this.appendChild(ai);n(this).addClass("ui-jqgrid-btable").append(st);st=null;var bi=n("<table class='ui-jqgrid-htable' style='width:"+i.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'><\/table>").append(v),l=i.p.caption&&i.p.hiddengrid===!0?!0:!1,g=n("<div class='ui-jqgrid-hbox"+(s==="rtl"?"-rtl":"")+"'><\/div>");v=null;r.hDiv=document.createElement("div");n(r.hDiv).css({width:r.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(g);n(g).append(bi);bi=null;l&&n(r.hDiv).hide();i.p.pager&&(typeof i.p.pager=="string"?i.p.pager.substr(0,1)!=="#"&&(i.p.pager="#"+i.p.pager):i.p.pager="#"+n(i.p.pager).attr("id"),n(i.p.pager).css({width:r.width+"px"}).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom").appendTo(k),l&&n(i.p.pager).hide(),si(i.p.pager,""));i.p.cellEdit===!1&&i.p.hoverrows===!0&&n(i).bind("mouseover",function(t){e=n(t.target).closest("tr.jqgrow");n(e).attr("class")!=="ui-subgrid"&&n(e).addClass("ui-state-hover")}).bind("mouseout",function(t){e=n(t.target).closest("tr.jqgrow");n(e).removeClass("ui-state-hover")});n(i).before(r.hDiv).click(function(t){var r,u,f;if(h=t.target,e=n(h,i.rows).closest("tr.jqgrow"),n(e).length===0||e[0].className.indexOf("ui-state-disabled")>-1||(n(h,i).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==i.id)return this;if((r=n(h).hasClass("cbox"),u=n(i).triggerHandler("jqGridBeforeSelectRow",[e[0].id,t]),u=u===!1||u==="stop"?!1:!0,u&&n.isFunction(i.p.beforeSelectRow)&&(u=i.p.beforeSelectRow.call(i,e[0].id,t)),h.tagName!=="A"&&(h.tagName!=="INPUT"&&h.tagName!=="TEXTAREA"&&h.tagName!=="OPTION"&&h.tagName!=="SELECT"||r))&&u===!0)if(o=e[0].id,a=n.jgrid.getCellIndex(h),ii=n(h).closest("td,th").html(),n(i).triggerHandler("jqGridCellSelect",[o,a,ii,t]),n.isFunction(i.p.onCellSelect)&&i.p.onCellSelect.call(i,o,a,ii,t),i.p.cellEdit===!0)if(i.p.multiselect&&r)n(i).jqGrid("setSelection",o,!0,t);else{o=e[0].rowIndex;try{n(i).jqGrid("editCell",o,a,!0)}catch(s){}}else i.p.multikey?t[i.p.multikey]?n(i).jqGrid("setSelection",o,!0,t):i.p.multiselect&&r&&(r=n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+o).is(":checked"),n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+o)[i.p.useProp?"prop":"attr"]("checked",r)):i.p.multiselect&&i.p.multiboxonly?r?n(i).jqGrid("setSelection",o,!0,t):(f=i.p.frozenColumns?i.p.id+"_frozen":"",n(i.p.selarrrow).each(function(t,r){var u=n(i).jqGrid("getGridRowById",r);n(u).removeClass("ui-state-highlight");n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(r))[i.p.useProp?"prop":"attr"]("checked",!1);f&&(n("#"+n.jgrid.jqID(r),"#"+n.jgrid.jqID(f)).removeClass("ui-state-highlight"),n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(r),"#"+n.jgrid.jqID(f))[i.p.useProp?"prop":"attr"]("checked",!1))}),i.p.selarrrow=[],n(i).jqGrid("setSelection",o,!0,t)):n(i).jqGrid("setSelection",o,!0,t)}).bind("reloadGrid",function(t,r){if(i.p.treeGrid===!0&&(i.p.datatype=i.p.treedatatype),r&&r.current&&i.grid.selectionPreserver(i),i.p.datatype==="local"?(n(i).jqGrid("resetSelection"),i.p.data.length&&bt()):i.p.treeGrid||(i.p.selrow=null,i.p.multiselect&&(i.p.selarrrow=[],lt(!1)),i.p.savedRow=[]),i.p.scroll&&tt.call(i,!0,!1),r&&r.page){var u=r.page;u>i.p.lastpage&&(u=i.p.lastpage);u<1&&(u=1);i.p.page=u;i.grid.bDiv.scrollTop=i.grid.prevRowHeight?(u-1)*i.grid.prevRowHeight*i.p.rowNum:0}return i.grid.prevRowHeight&&i.p.scroll?(delete i.p.lastpage,i.grid.populateVisible()):i.grid.populate(),i.p._inlinenav===!0&&n(i).jqGrid("showAddEditButtons"),!1}).dblclick(function(t){(h=t.target,e=n(h,i.rows).closest("tr.jqgrow"),n(e).length!==0)&&(o=e[0].rowIndex,a=n.jgrid.getCellIndex(h),n(i).triggerHandler("jqGridDblClickRow",[n(e).attr("id"),o,a,t]),n.isFunction(i.p.ondblClickRow)&&i.p.ondblClickRow.call(i,n(e).attr("id"),o,a,t))}).bind("contextmenu",function(t){(h=t.target,e=n(h,i.rows).closest("tr.jqgrow"),n(e).length!==0)&&(i.p.multiselect||n(i).jqGrid("setSelection",e[0].id,!0,t),o=e[0].rowIndex,a=n.jgrid.getCellIndex(h),n(i).triggerHandler("jqGridRightClickRow",[n(e).attr("id"),o,a,t]),n.isFunction(i.p.onRightClickRow)&&i.p.onRightClickRow.call(i,n(e).attr("id"),o,a,t))});r.bDiv=document.createElement("div");ht&&String(i.p.height).toLowerCase()==="auto"&&(i.p.height="100%");n(r.bDiv).append(n('<div style="position:relative;'+(ht&&n.jgrid.msiever()<8?"height:0.01%;":"")+'"><\/div>').append("<div><\/div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:i.p.height+(isNaN(i.p.height)?"":"px"),width:r.width+"px"}).scroll(r.scrollGrid);n("table:first",r.bDiv).css({width:i.p.tblwidth+"px"});n.support.tbody||n("tbody",this).length===2&&n("tbody:gt(0)",this).remove();i.p.multikey&&(n.jgrid.msie?n(r.bDiv).bind("selectstart",function(){return!1}):n(r.bDiv).bind("mousedown",function(){return!1}));l&&n(r.bDiv).hide();r.cDiv=document.createElement("div");yt=i.p.hidegrid===!0?n("<a role='link' class='ui-jqgrid-titlebar-close HeaderButton' />").hover(function(){yt.addClass("ui-state-hover")},function(){yt.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'><\/span>").css(s==="rtl"?"left":"right","0px"):"";n(r.cDiv).append(yt).append("<span class='ui-jqgrid-title"+(s==="rtl"?"-rtl":"")+"'>"+i.p.caption+"<\/span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix");n(r.cDiv).insertBefore(r.hDiv);i.p.toolbar[0]&&(r.uDiv=document.createElement("div"),i.p.toolbar[1]==="top"?n(r.uDiv).insertBefore(r.hDiv):i.p.toolbar[1]==="bottom"&&n(r.uDiv).insertAfter(r.hDiv),i.p.toolbar[1]==="both"?(r.ubDiv=document.createElement("div"),n(r.uDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id).insertBefore(r.hDiv),n(r.ubDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id).insertAfter(r.hDiv),l&&n(r.ubDiv).hide()):n(r.uDiv).width(r.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),l&&n(r.uDiv).hide());i.p.toppager&&(i.p.toppager=n.jgrid.jqID(i.p.id)+"_toppager",r.topDiv=n("<div id='"+i.p.toppager+"'><\/div>")[0],i.p.toppager="#"+i.p.toppager,n(r.topDiv).addClass("ui-state-default ui-jqgrid-toppager").width(r.width).insertBefore(r.hDiv),si(i.p.toppager,"_t"));i.p.footerrow&&(r.sDiv=n("<div class='ui-jqgrid-sdiv'><\/div>")[0],g=n("<div class='ui-jqgrid-hbox"+(s==="rtl"?"-rtl":"")+"'><\/div>"),n(r.sDiv).append(g).width(r.width).insertAfter(r.hDiv),n(g).append(ot),r.footers=n(".ui-jqgrid-ftable",r.sDiv)[0].rows[0].cells,i.p.rownumbers&&(r.footers[0].className="ui-state-default jqgrid-rownum"),l&&n(r.sDiv).hide());g=null;i.p.caption?(ki=i.p.datatype,i.p.hidegrid===!0&&(n(".ui-jqgrid-titlebar-close",r.cDiv).click(function(t){var e=n.isFunction(i.p.onHeaderClick),u=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",f,o=this;return i.p.toolbar[0]===!0&&(i.p.toolbar[1]==="both"&&(u+=", #"+n(r.ubDiv).attr("id")),u+=", #"+n(r.uDiv).attr("id")),f=n(u,"#gview_"+n.jgrid.jqID(i.p.id)).length,i.p.gridstate==="visible"?n(u,"#gbox_"+n.jgrid.jqID(i.p.id)).slideUp("fast",function(){f--;f===0&&(n("span",o).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),i.p.gridstate="hidden",n("#gbox_"+n.jgrid.jqID(i.p.id)).hasClass("ui-resizable")&&n(".ui-resizable-handle","#gbox_"+n.jgrid.jqID(i.p.id)).hide(),n(i).triggerHandler("jqGridHeaderClick",[i.p.gridstate,t]),e&&(l||i.p.onHeaderClick.call(i,i.p.gridstate,t)))}):i.p.gridstate==="hidden"&&n(u,"#gbox_"+n.jgrid.jqID(i.p.id)).slideDown("fast",function(){f--;f===0&&(n("span",o).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),l&&(i.p.datatype=ki,p(),l=!1),i.p.gridstate="visible",n("#gbox_"+n.jgrid.jqID(i.p.id)).hasClass("ui-resizable")&&n(".ui-resizable-handle","#gbox_"+n.jgrid.jqID(i.p.id)).show(),n(i).triggerHandler("jqGridHeaderClick",[i.p.gridstate,t]),e&&(l||i.p.onHeaderClick.call(i,i.p.gridstate,t)))}),!1}),l&&(i.p.datatype="local",n(".ui-jqgrid-titlebar-close",r.cDiv).trigger("click")))):n(r.cDiv).hide();n(r.hDiv).after(r.bDiv).mousemove(function(n){if(r.resizing)return r.dragMove(n),!1});n(".ui-jqgrid-labels",r.hDiv).bind("selectstart",function(){return!1});n(document).bind("mouseup.jqGrid"+i.p.id,function(){return r.resizing?(r.dragEnd(),!1):!0});i.formatCol=nt;i.sortData=hi;i.updatepager=gi;i.refreshIndex=bt;i.setHeadCheckBox=lt;i.constructTr=kt;i.formatter=function(n,t,i,r,u){return ui(n,t,i,r,u)};n.extend(r,{populate:p,emptyRows:tt,beginReq:it,endReq:w});this.grid=r;i.addXmlData=function(n){dt(n,i.grid.bDiv)};i.addJSONData=function(n){ct(n,i.grid.bDiv)};this.grid.cols=this.rows[0].cells;n(i).triggerHandler("jqGridInitGrid");n.isFunction(i.p.onInitGrid)&&i.p.onInitGrid.call(i);p();i.p.hiddengrid=!1}})};n.jgrid.extend({getGridParam:function(n){var t=this[0];if(t&&t.grid)return n?t.p[n]!==undefined?t.p[n]:null:t.p},setGridParam:function(t){return this.each(function(){this.grid&&typeof t=="object"&&n.extend(!0,this.p,t)})},getGridRowById:function(t){var i;return this.each(function(){try{i=this.rows.namedItem(t)}catch(r){i=n(this.grid.bDiv).find("#"+n.jgrid.jqID(t))}}),i},getDataIDs:function(){var r=[],t=0,i,u=0;return this.each(function(){if(i=this.rows.length,i&&i>0)while(t<i)n(this.rows[t]).hasClass("jqgrow")&&(r[u]=this.rows[t].id,u++),t++}),r},setSelection:function(t,i,r){return this.each(function(){function l(t){var f=n(u.grid.bDiv)[0].clientHeight,i=n(u.grid.bDiv)[0].scrollTop,r=n(u.rows[t]).position().top,e=u.rows[t].clientHeight;r+e>=f+i?n(u.grid.bDiv)[0].scrollTop=r-(f+i)+e+i:r<f+i&&r<i&&(n(u.grid.bDiv)[0].scrollTop=r)}var u=this,e,f,h,s,c,o;t!==undefined&&((i=i===!1?!1:!0,f=n(u).jqGrid("getGridRowById",t),!f||!f.className||f.className.indexOf("ui-state-disabled")>-1)||(u.p.scrollrows===!0&&(h=n(u).jqGrid("getGridRowById",t).rowIndex,h>=0&&l(h)),u.p.frozenColumns===!0&&(o=u.p.id+"_frozen"),u.p.multiselect?(u.setHeadCheckBox(!1),u.p.selrow=f.id,s=n.inArray(u.p.selrow,u.p.selarrrow),s===-1?(f.className!=="ui-subgrid"&&n(f).addClass("ui-state-highlight").attr("aria-selected","true"),e=!0,u.p.selarrrow.push(u.p.selrow)):(f.className!=="ui-subgrid"&&n(f).removeClass("ui-state-highlight").attr("aria-selected","false"),e=!1,u.p.selarrrow.splice(s,1),c=u.p.selarrrow[0],u.p.selrow=c===undefined?null:c),n("#jqg_"+n.jgrid.jqID(u.p.id)+"_"+n.jgrid.jqID(f.id))[u.p.useProp?"prop":"attr"]("checked",e),o&&(s===-1?n("#"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(o)).addClass("ui-state-highlight"):n("#"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(o)).removeClass("ui-state-highlight"),n("#jqg_"+n.jgrid.jqID(u.p.id)+"_"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(o))[u.p.useProp?"prop":"attr"]("checked",e)),i&&(n(u).triggerHandler("jqGridSelectRow",[f.id,e,r]),u.p.onSelectRow&&u.p.onSelectRow.call(u,f.id,e,r))):f.className!=="ui-subgrid"&&(u.p.selrow!==f.id?(n(n(u).jqGrid("getGridRowById",u.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),n(f).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"}),o&&(n("#"+n.jgrid.jqID(u.p.selrow),"#"+n.jgrid.jqID(o)).removeClass("ui-state-highlight"),n("#"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(o)).addClass("ui-state-highlight")),e=!0):e=!1,u.p.selrow=f.id,i&&(n(u).triggerHandler("jqGridSelectRow",[f.id,e,r]),u.p.onSelectRow&&u.p.onSelectRow.call(u,f.id,e,r)))))})},resetSelection:function(t){return this.each(function(){var i=this,u,r;i.p.frozenColumns===!0&&(r=i.p.id+"_frozen");t!==undefined?(u=t===i.p.selrow?i.p.selrow:t,n("#"+n.jgrid.jqID(i.p.id)+" tbody:first tr#"+n.jgrid.jqID(u)).removeClass("ui-state-highlight").attr("aria-selected","false"),r&&n("#"+n.jgrid.jqID(u),"#"+n.jgrid.jqID(r)).removeClass("ui-state-highlight"),i.p.multiselect&&(n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(u),"#"+n.jgrid.jqID(i.p.id))[i.p.useProp?"prop":"attr"]("checked",!1),r&&n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(u),"#"+n.jgrid.jqID(r))[i.p.useProp?"prop":"attr"]("checked",!1),i.setHeadCheckBox(!1)),u=null):i.p.multiselect?(n(i.p.selarrrow).each(function(t,u){n(n(i).jqGrid("getGridRowById",u)).removeClass("ui-state-highlight").attr("aria-selected","false");n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(u))[i.p.useProp?"prop":"attr"]("checked",!1);r&&(n("#"+n.jgrid.jqID(u),"#"+n.jgrid.jqID(r)).removeClass("ui-state-highlight"),n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(u),"#"+n.jgrid.jqID(r))[i.p.useProp?"prop":"attr"]("checked",!1))}),i.setHeadCheckBox(!1),i.p.selarrrow=[]):i.p.selrow&&(n("#"+n.jgrid.jqID(i.p.id)+" tbody:first tr#"+n.jgrid.jqID(i.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),r&&n("#"+n.jgrid.jqID(i.p.selrow),"#"+n.jgrid.jqID(r)).removeClass("ui-state-highlight"),i.p.selrow=null);i.p.cellEdit===!0&&parseInt(i.p.iCol,10)>=0&&parseInt(i.p.iRow,10)>=0&&(n("td:eq("+i.p.iCol+")",i.rows[i.p.iRow]).removeClass("edit-cell ui-state-highlight"),n(i.rows[i.p.iRow]).removeClass("selected-row ui-state-hover"));i.p.savedRow=[]})},getRowData:function(t){var i={},r,u=!1,f,e=0;return this.each(function(){var o=this,s,h;if(t===undefined)u=!0,r=[],f=o.rows.length;else{if(h=n(o).jqGrid("getGridRowById",t),!h)return i;f=2}while(e<f)u&&(h=o.rows[e]),n(h).hasClass("jqgrow")&&(n('td[role="gridcell"]',h).each(function(t){if(s=o.p.colModel[t].name,s!=="cb"&&s!=="subgrid"&&s!=="rn")if(o.p.treeGrid===!0&&s===o.p.ExpandColumn)i[s]=n.jgrid.htmlDecode(n("span:first",this).html());else try{i[s]=n.unformat.call(o,this,{rowId:h.id,colModel:o.p.colModel[t]},t)}catch(r){i[s]=n.jgrid.htmlDecode(n(this).html())}}),u&&(r.push(i),i={})),e++}),r||i},delRowData:function(t){var i=!1,r,u;return this.each(function(){var f=this,s,e,o;if(r=n(f).jqGrid("getGridRowById",t),!r)return!1;n(r).remove();f.p.records--;f.p.reccount--;f.updatepager(!0,!1);i=!0;f.p.multiselect&&(u=n.inArray(t,f.p.selarrrow),u!==-1&&f.p.selarrrow.splice(u,1));f.p.selrow=f.p.multiselect&&f.p.selarrrow.length>0?f.p.selarrrow[f.p.selarrrow.length-1]:null;f.p.datatype==="local"&&(s=n.jgrid.stripPref(f.p.idPrefix,t),e=f.p._index[s],e!==undefined&&(f.p.data.splice(e,1),f.refreshIndex()));f.p.altRows===!0&&i&&(o=f.p.altclass,n(f.rows).each(function(t){t%2==1?n(this).addClass(o):n(this).removeClass(o)}))}),i},setRowData:function(t,i,r){var u,f=!0,e;return this.each(function(){var y,l,a;if(!this.grid)return!1;var o=this,h,s,v=typeof r,c={};if(s=n(this).jqGrid("getGridRowById",t),!s)return!1;if(i)try{if(n(this.p.colModel).each(function(r){u=this.name;var f=n.jgrid.getAccessor(i,u);f!==undefined&&(c[u]=this.formatter&&typeof this.formatter=="string"&&this.formatter==="date"?n.unformat.date.call(o,f,this):f,h=o.formatter(t,f,r,i,"edit"),e=this.title?{title:n.jgrid.stripHtml(h)}:{},o.p.treeGrid===!0&&u===o.p.ExpandColumn?n("td[role='gridcell']:eq("+r+") > span:first",s).html(h).attr(e):n("td[role='gridcell']:eq("+r+")",s).html(h).attr(e))}),o.p.datatype==="local"){if(y=n.jgrid.stripPref(o.p.idPrefix,t),l=o.p._index[y],o.p.treeGrid)for(a in o.p.treeReader)o.p.treeReader.hasOwnProperty(a)&&delete c[o.p.treeReader[a]];l!==undefined&&(o.p.data[l]=n.extend(!0,o.p.data[l],c));c=null}}catch(p){f=!1}f&&(v==="string"?n(s).addClass(r):v==="object"&&n(s).css(r),n(o).triggerHandler("jqGridAfterGridComplete"))}),f},addRowData:function(t,i,r,u){r||(r="last");var d=!1,w,f,h,b,s,e,c,a,l="",v,y,p,o,g,k;return i&&(n.isArray(i)?(v=!0,r="last",y=t):(i=[i],v=!1),this.each(function(){var nt=this,ut=i.length;s=nt.p.rownumbers===!0?1:0;h=nt.p.multiselect===!0?1:0;b=nt.p.subGrid===!0?1:0;v||(t!==undefined?t=String(t):(t=n.jgrid.randId(),nt.p.keyIndex!==!1&&(y=nt.p.colModel[nt.p.keyIndex+h+b+s].name,i[0][y]!==undefined&&(t=i[0][y]))));p=nt.p.altclass;for(var it=0,rt="",tt={},ft=n.isFunction(nt.p.afterInsertRow)?!0:!1;it<ut;){if(o=i[it],f=[],v){try{t=o[y];t===undefined&&(t=n.jgrid.randId())}catch(et){t=n.jgrid.randId()}rt=nt.p.altRows===!0?(nt.rows.length-1)%2==0?p:"":""}for(k=t,t=nt.p.idPrefix+t,s&&(l=nt.formatCol(0,1,"",null,t,!0),f[f.length]='<td role="gridcell" class="ui-state-default jqgrid-rownum" '+l+">0<\/td>"),h&&(a='<input role="checkbox" type="checkbox" id="jqg_'+nt.p.id+"_"+t+'" class="cbox"/>',l=nt.formatCol(s,1,"",null,t,!0),f[f.length]='<td role="gridcell" '+l+">"+a+"<\/td>"),b&&(f[f.length]=n(nt).jqGrid("addSubGridCell",h+s,1)),c=h+b+s;c<nt.p.colModel.length;c++)g=nt.p.colModel[c],w=g.name,tt[w]=o[w],a=nt.formatter(t,n.jgrid.getAccessor(o,w),c,o),l=nt.formatCol(c,1,a,o,t,tt),f[f.length]='<td role="gridcell" '+l+">"+a+"<\/td>";if(f.unshift(nt.constructTr(t,!1,rt,tt,o,!1)),f[f.length]="<\/tr>",nt.rows.length===0)n("table:first",nt.grid.bDiv).append(f.join(""));else switch(r){case"last":n(nt.rows[nt.rows.length-1]).after(f.join(""));e=nt.rows.length-1;break;case"first":n(nt.rows[0]).after(f.join(""));e=1;break;case"after":e=n(nt).jqGrid("getGridRowById",u);e&&(n(nt.rows[e.rowIndex+1]).hasClass("ui-subgrid")?n(nt.rows[e.rowIndex+1]).after(f):n(e).after(f.join("")),e=e.rowIndex+1);break;case"before":e=n(nt).jqGrid("getGridRowById",u);e&&(n(e).before(f.join("")),e=e.rowIndex-1)}nt.p.subGrid===!0&&n(nt).jqGrid("addSubGrid",h+s,e);nt.p.records++;nt.p.reccount++;n(nt).triggerHandler("jqGridAfterInsertRow",[t,o,o]);ft&&nt.p.afterInsertRow.call(nt,t,o,o);it++;nt.p.datatype==="local"&&(tt[nt.p.localReader.id]=k,nt.p._index[k]=nt.p.data.length,nt.p.data.push(tt),tt={})}nt.p.altRows!==!0||v||(r==="last"?(nt.rows.length-1)%2==1&&n(nt.rows[nt.rows.length-1]).addClass(p):n(nt.rows).each(function(t){t%2==1?n(this).addClass(p):n(this).removeClass(p)}));nt.updatepager(!0,!0);d=!0})),d},footerData:function(t,i,r){function s(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}var u,f=!1,e={},o;return t===undefined&&(t="get"),typeof r!="boolean"&&(r=!0),t=t.toLowerCase(),this.each(function(){var h=this,c;if(!h.grid||!h.p.footerrow||t==="set"&&s(i))return!1;f=!0;n(this.p.colModel).each(function(s){u=this.name;t==="set"?i[u]!==undefined&&(c=r?h.formatter("",i[u],s,i,"edit"):i[u],o=this.title?{title:n.jgrid.stripHtml(c)}:{},n("tr.footrow td:eq("+s+")",h.grid.sDiv).html(c).attr(o),f=!0):t==="get"&&(e[u]=n("tr.footrow td:eq("+s+")",h.grid.sDiv).html())})}),t==="get"?e:f},showHideCol:function(t,i){return this.each(function(){var r=this,o=!1,s=n.jgrid.cell_width?0:r.p.cellLayout,f,u,e;r.grid&&(typeof t=="string"&&(t=[t]),i=i!=="none"?"":"none",u=i===""?!0:!1,e=r.p.groupHeader&&(typeof r.p.groupHeader=="object"||n.isFunction(r.p.groupHeader)),e&&n(r).jqGrid("destroyGroupHeader",!1),n(this.p.colModel).each(function(e){if(n.inArray(this.name,t)!==-1&&this.hidden===u){if(r.p.frozenColumns===!0&&this.frozen===!0)return!0;n("tr[role=rowheader]",r.grid.hDiv).each(function(){n(this.cells[e]).css("display",i)});n(r.rows).each(function(){n(this).hasClass("jqgroup")||n(this.cells[e]).css("display",i)});r.p.footerrow&&n("tr.footrow td:eq("+e+")",r.grid.sDiv).css("display",i);f=parseInt(this.width,10);i==="none"?r.p.tblwidth-=f+s:r.p.tblwidth+=f+s;this.hidden=!u;o=!0;n(r).triggerHandler("jqGridShowHideCol",[u,this.name,e])}}),o===!0&&(r.p.shrinkToFit!==!0||isNaN(r.p.height)||(r.p.tblwidth+=parseInt(r.p.scrollOffset,10)),n(r).jqGrid("setGridWidth",r.p.shrinkToFit===!0?r.p.tblwidth:r.p.width)),e&&n(r).jqGrid("setGroupHeaders",r.p.groupHeader))})},hideCol:function(t){return this.each(function(){n(this).jqGrid("showHideCol",t,"none")})},showCol:function(t){return this.each(function(){n(this).jqGrid("showHideCol",t,"")})},remapColumns:function(t,i,r){function f(i){var r;r=i.length?n.makeArray(i):n.extend({},i);n.each(t,function(n){i[n]=r[this]})}function e(i,r){n(">tr"+(r||""),i).each(function(){var i=this,r=n.makeArray(i.cells);n.each(t,function(){var n=r[this];n&&i.appendChild(n)})})}var u=this.get(0);f(u.p.colModel);f(u.p.colNames);f(u.grid.headers);e(n("thead:first",u.grid.hDiv),r&&":not(.ui-jqgrid-labels)");i&&e(n("#"+n.jgrid.jqID(u.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot");u.p.footerrow&&e(n("tbody:first",u.grid.sDiv));u.p.remapColumns&&(u.p.remapColumns.length?f(u.p.remapColumns):u.p.remapColumns=n.makeArray(t));u.p.lastsort=n.inArray(u.p.lastsort,t);u.p.treeGrid&&(u.p.expColInd=n.inArray(u.p.expColInd,t));n(u).triggerHandler("jqGridRemapColumns",[t,i,r])},setGridWidth:function(t,i){return this.each(function(){var v,p;if(this.grid){var r=this,u,e=0,o=n.jgrid.cell_width?0:r.p.cellLayout,f,s=0,y=!1,l=r.p.scrollOffset,a,h=0,c;if(typeof i!="boolean"&&(i=r.p.shrinkToFit),!isNaN(t)){if(t=parseInt(t,10),r.grid.width=r.p.width=t,n("#gbox_"+n.jgrid.jqID(r.p.id)).css("width",t+"px"),n("#gview_"+n.jgrid.jqID(r.p.id)).css("width",t+"px"),n(r.grid.bDiv).css("width",t+"px"),n(r.grid.hDiv).css("width",t+"px"),r.p.pager&&n(r.p.pager).css("width",t+"px"),r.p.toppager&&n(r.p.toppager).css("width",t+"px"),r.p.toolbar[0]===!0&&(n(r.grid.uDiv).css("width",t+"px"),r.p.toolbar[1]==="both"&&n(r.grid.ubDiv).css("width",t+"px")),r.p.footerrow&&n(r.grid.sDiv).css("width",t+"px"),i===!1&&r.p.forceFit===!0&&(r.p.forceFit=!1),i===!0){if(n.each(r.p.colModel,function(){this.hidden===!1&&(u=this.widthOrg,e+=u+o,this.fixed?h+=u+o:s++)}),s===0)return;if(r.p.tblwidth=e,a=t-o*s-h,isNaN(r.p.height)||(n(r.grid.bDiv)[0].clientHeight<n(r.grid.bDiv)[0].scrollHeight||r.rows.length===1)&&(y=!0,a-=l),e=0,v=r.grid.cols.length>0,n.each(r.p.colModel,function(n){if(this.hidden===!1&&!this.fixed){if(u=this.widthOrg,u=Math.round(a*u/(r.p.tblwidth-o*s-h)),u<0)return;this.width=u;e+=u;r.grid.headers[n].width=u;r.grid.headers[n].el.style.width=u+"px";r.p.footerrow&&(r.grid.footers[n].style.width=u+"px");v&&(r.grid.cols[n].style.width=u+"px");f=n}}),!f)return;c=0;y?t-h-(e+o*s)!==l&&(c=t-h-(e+o*s)-l):Math.abs(t-h-(e+o*s))!==1&&(c=t-h-(e+o*s));r.p.colModel[f].width+=c;r.p.tblwidth=e+c+o*s+h;r.p.tblwidth>t?(p=r.p.tblwidth-parseInt(t,10),r.p.tblwidth=t,u=r.p.colModel[f].width=r.p.colModel[f].width-p):u=r.p.colModel[f].width;r.grid.headers[f].width=u;r.grid.headers[f].el.style.width=u+"px";v&&(r.grid.cols[f].style.width=u+"px");r.p.footerrow&&(r.grid.footers[f].style.width=u+"px")}r.p.tblwidth&&(n("table:first",r.grid.bDiv).css("width",r.p.tblwidth+"px"),n("table:first",r.grid.hDiv).css("width",r.p.tblwidth+"px"),r.grid.hDiv.scrollLeft=r.grid.bDiv.scrollLeft,r.p.footerrow&&n("table:first",r.grid.sDiv).css("width",r.p.tblwidth+"px"))}}})},setGridHeight:function(t){return this.each(function(){var i=this,r;i.grid&&(r=n(i.grid.bDiv),r.css({height:t+(isNaN(t)?"":"px")}),i.p.frozenColumns===!0&&n("#"+n.jgrid.jqID(i.p.id)+"_frozen").parent().height(r.height()-16),i.p.height=t,i.p.scroll&&i.grid.populateVisible())})},setCaption:function(t){return this.each(function(){this.p.caption=t;n("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",this.grid.cDiv).html(t);n(this.grid.cDiv).show()})},setLabel:function(t,i,r,u){return this.each(function(){var e=this,o=-1,f,s;if(e.grid){if(t!==undefined)n(e.p.colModel).each(function(n){if(this.name===t)return o=n,!1});else return;o>=0&&(f=n("tr.ui-jqgrid-labels th:eq("+o+")",e.grid.hDiv),i&&(s=n(".s-ico",f),n("[id^=jqgh_]",f).empty().html(i).append(s),e.p.colNames[o]=i),r&&(typeof r=="string"?n(f).addClass(r):n(f).css(r)),typeof u=="object"&&n(f).attr(u))}})},setCell:function(t,i,r,u,f,e){return this.each(function(){var o=this,s=-1,l,v,a,h,c,y;o.grid&&(isNaN(i)?n(o.p.colModel).each(function(n){if(this.name===i)return s=n,!1}):s=parseInt(i,10),s>=0&&(a=n(o).jqGrid("getGridRowById",t),a&&(h=n("td:eq("+s+")",a),(r!==""||e===!0)&&(l=o.formatter(t,r,s,a,"edit"),v=o.p.colModel[s].title?{title:n.jgrid.stripHtml(l)}:{},o.p.treeGrid&&n(".tree-wrap",n(h)).length>0?n("span",n(h)).html(l).attr(v):n(h).html(l).attr(v),o.p.datatype==="local"&&(c=o.p.colModel[s],r=c.formatter&&typeof c.formatter=="string"&&c.formatter==="date"?n.unformat.date.call(o,r,c):r,y=o.p._index[n.jgrid.stripPref(o.p.idPrefix,t)],y!==undefined&&(o.p.data[y][c.name]=r))),typeof u=="string"?n(h).addClass(u):u&&n(h).css(u),typeof f=="object"&&n(h).attr(f))))})},getCell:function(t,i){var r=!1;return this.each(function(){var f=this,u=-1,e;if(f.grid&&(isNaN(i)?n(f.p.colModel).each(function(n){if(this.name===i)return u=n,!1}):u=parseInt(i,10),u>=0&&(e=n(f).jqGrid("getGridRowById",t),e)))try{r=n.unformat.call(f,n("td:eq("+u+")",e),{rowId:e.id,colModel:f.p.colModel[u]},u)}catch(o){r=n.jgrid.htmlDecode(n("td:eq("+u+")",e).html())}}),r},getCol:function(t,i,r){var u=[],e,h=0,s,o,f;return i=typeof i!="boolean"?!1:i,r===undefined&&(r=!1),this.each(function(){var c=this,l=-1;if(c.grid&&(isNaN(t)?n(c.p.colModel).each(function(n){if(this.name===t)return l=n,!1}):l=parseInt(t,10),l>=0)){var v=c.rows.length,a=0,y=0;if(v&&v>0){while(a<v){if(n(c.rows[a]).hasClass("jqgrow")){try{e=n.unformat.call(c,n(c.rows[a].cells[l]),{rowId:c.rows[a].id,colModel:c.p.colModel[l]},l)}catch(p){e=n.jgrid.htmlDecode(c.rows[a].cells[l].innerHTML)}r?(f=parseFloat(e),isNaN(f)||(h+=f,o===undefined&&(o=s=f),s=Math.min(s,f),o=Math.max(o,f),y++)):i?u.push({id:c.rows[a].id,value:e}):u.push(e)}a++}if(r)switch(r.toLowerCase()){case"sum":u=h;break;case"avg":u=h/y;break;case"count":u=v-1;break;case"min":u=s;break;case"max":u=o}}}}),u},clearGridData:function(t){return this.each(function(){var i=this,r;i.grid&&(typeof t!="boolean"&&(t=!1),i.p.deepempty?n("#"+n.jgrid.jqID(i.p.id)+" tbody:first tr:gt(0)").remove():(r=n("#"+n.jgrid.jqID(i.p.id)+" tbody:first tr:first")[0],n("#"+n.jgrid.jqID(i.p.id)+" tbody:first").empty().append(r)),i.p.footerrow&&t&&n(".ui-jqgrid-ftable td",i.grid.sDiv).html("&#160;"),i.p.selrow=null,i.p.selarrrow=[],i.p.savedRow=[],i.p.records=0,i.p.page=1,i.p.lastpage=0,i.p.reccount=0,i.p.data=[],i.p._index={},i.updatepager(!0,!1))})},getInd:function(t,i){var u=!1,r;return this.each(function(){r=n(this).jqGrid("getGridRowById",t);r&&(u=i===!0?r:r.rowIndex)}),u},bindKeys:function(t){var i=n.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},t||{});return this.each(function(){var t=this;n("body").is("[role]")||n("body").attr("role","application");t.p.scrollrows=i.scrollingRows;n(t).keydown(function(r){var e=n(t).find("tr[tabindex=0]")[0],f,u,o,s=t.p.treeReader.expanded_field;if(e)if(o=t.p._index[n.jgrid.stripPref(t.p.idPrefix,e.id)],r.keyCode===37||r.keyCode===38||r.keyCode===39||r.keyCode===40){if(r.keyCode===38){if(u=e.previousSibling,f="",u)if(n(u).is(":hidden")){while(u)if(u=u.previousSibling,!n(u).is(":hidden")&&n(u).hasClass("jqgrow")){f=u.id;break}}else f=u.id;n(t).jqGrid("setSelection",f,!0,r);r.preventDefault()}if(r.keyCode===40){if(u=e.nextSibling,f="",u)if(n(u).is(":hidden")){while(u)if(u=u.nextSibling,!n(u).is(":hidden")&&n(u).hasClass("jqgrow")){f=u.id;break}}else f=u.id;n(t).jqGrid("setSelection",f,!0,r);r.preventDefault()}r.keyCode===37&&(t.p.treeGrid&&t.p.data[o][s]&&n(e).find("div.treeclick").trigger("click"),n(t).triggerHandler("jqGridKeyLeft",[t.p.selrow]),n.isFunction(i.onLeftKey)&&i.onLeftKey.call(t,t.p.selrow));r.keyCode===39&&(t.p.treeGrid&&!t.p.data[o][s]&&n(e).find("div.treeclick").trigger("click"),n(t).triggerHandler("jqGridKeyRight",[t.p.selrow]),n.isFunction(i.onRightKey)&&i.onRightKey.call(t,t.p.selrow))}else r.keyCode===13?(n(t).triggerHandler("jqGridKeyEnter",[t.p.selrow]),n.isFunction(i.onEnter)&&i.onEnter.call(t,t.p.selrow)):r.keyCode===32&&(n(t).triggerHandler("jqGridKeySpace",[t.p.selrow]),n.isFunction(i.onSpace)&&i.onSpace.call(t,t.p.selrow))})})},unbindKeys:function(){return this.each(function(){n(this).unbind("keydown")})},getLocalRow:function(t){var r=!1,i;return this.each(function(){t!==undefined&&(i=this.p._index[n.jgrid.stripPref(this.p.idPrefix,t)],i>=0&&(r=this.p.data[i]))}),r}})})(jQuery),function(n){"use strict";n.extend(n.jgrid,{template:function(t){var r=n.makeArray(arguments).slice(1),i,u=r.length;return t==null&&(t=""),t.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(t,f){if(!isNaN(parseInt(f,10)))return r[parseInt(f,10)];for(i=0;i<u;i++)if(n.isArray(r[i]))for(var e=r[i],o=e.length;o--;)if(f===e[o].nm)return e[o].v})}});n.jgrid.extend({groupingSetup:function(){return this.each(function(){var f=this,i,r,e,u=f.p.colModel,t=f.p.groupingView;if(t!==null&&(typeof t=="object"||n.isFunction(t)))if(t.groupField.length){for(t.visibiltyOnNextGrouping===undefined&&(t.visibiltyOnNextGrouping=[]),t.lastvalues=[],t.groups=[],t.counters=[],i=0;i<t.groupField.length;i++)t.groupOrder[i]||(t.groupOrder[i]="asc"),t.groupText[i]||(t.groupText[i]="{0}"),typeof t.groupColumnShow[i]!="boolean"&&(t.groupColumnShow[i]=!0),typeof t.groupSummary[i]!="boolean"&&(t.groupSummary[i]=!1),t.groupColumnShow[i]===!0?(t.visibiltyOnNextGrouping[i]=!0,n(f).jqGrid("showCol",t.groupField[i])):(t.visibiltyOnNextGrouping[i]=n("#"+n.jgrid.jqID(f.p.id+"_"+t.groupField[i])).is(":visible"),n(f).jqGrid("hideCol",t.groupField[i]));for(t.summary=[],r=0,e=u.length;r<e;r++)u[r].summaryType&&(u[r].summaryDivider?t.summary.push({nm:u[r].name,st:u[r].summaryType,v:"",sd:u[r].summaryDivider,vd:"",sr:u[r].summaryRound,srt:u[r].summaryRoundType||"round"}):t.summary.push({nm:u[r].name,st:u[r].summaryType,v:"",sr:u[r].summaryRound,srt:u[r].summaryRoundType||"round"}))}else f.p.grouping=!1;else f.p.grouping=!1})},groupingPrepare:function(t,i,r,u){return this.each(function(){for(var f=this.p.groupingView,o=this,v=f.groupField.length,c,s,l,h,a=0,e=0;e<v;e++)c=f.groupField[e],l=f.displayField[e],s=r[c],h=l==null?null:r[l],h==null&&(h=s),s!==undefined&&(u===0?(f.groups.push({idx:e,dataIndex:c,value:s,displayValue:h,startRow:u,cnt:1,summary:[]}),f.lastvalues[e]=s,f.counters[e]={cnt:1,pos:f.groups.length-1,summary:n.extend(!0,[],f.summary)},n.each(f.counters[e].summary,function(){n.isFunction(this.st)?this.v=this.st.call(o,this.v,this.nm,r):(this.v=n(o).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,r),this.st.toLowerCase()==="avg"&&this.sd&&(this.vd=n(o).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,r)))}),f.groups[f.counters[e].pos].summary=f.counters[e].summary):typeof s=="object"||(n.isArray(f.isInTheSameGroup)&&n.isFunction(f.isInTheSameGroup[e])?f.isInTheSameGroup[e].call(o,f.lastvalues[e],s,e,f):f.lastvalues[e]===s)?a===1?(f.groups.push({idx:e,dataIndex:c,value:s,displayValue:h,startRow:u,cnt:1,summary:[]}),f.lastvalues[e]=s,f.counters[e]={cnt:1,pos:f.groups.length-1,summary:n.extend(!0,[],f.summary)},n.each(f.counters[e].summary,function(){n.isFunction(this.st)?this.v=this.st.call(o,this.v,this.nm,r):(this.v=n(o).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,r),this.st.toLowerCase()==="avg"&&this.sd&&(this.vd=n(o).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,r)))}),f.groups[f.counters[e].pos].summary=f.counters[e].summary):(f.counters[e].cnt+=1,f.groups[f.counters[e].pos].cnt=f.counters[e].cnt,n.each(f.counters[e].summary,function(){n.isFunction(this.st)?this.v=this.st.call(o,this.v,this.nm,r):(this.v=n(o).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,r),this.st.toLowerCase()==="avg"&&this.sd&&(this.vd=n(o).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,r)))}),f.groups[f.counters[e].pos].summary=f.counters[e].summary):(f.groups.push({idx:e,dataIndex:c,value:s,displayValue:h,startRow:u,cnt:1,summary:[]}),f.lastvalues[e]=s,a=1,f.counters[e]={cnt:1,pos:f.groups.length-1,summary:n.extend(!0,[],f.summary)},n.each(f.counters[e].summary,function(){n.isFunction(this.st)?this.v=this.st.call(o,this.v,this.nm,r):(this.v=n(o).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,r),this.st.toLowerCase()==="avg"&&this.sd&&(this.vd=n(o).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,r)))}),f.groups[f.counters[e].pos].summary=f.counters[e].summary));i.push(t)}),i},groupingToggle:function(t){return this.each(function(){var u=this,h=u.p.groupingView,f=t.split("_"),e=parseInt(f[f.length-2],10),w;f.splice(f.length-2,2);var c=f.join("_"),o=h.minusicon,l=h.plusicon,y=n("#"+n.jgrid.jqID(t)),i=y.length?y[0].nextSibling:null,a=n("#"+n.jgrid.jqID(t)+" span.tree-wrap-"+u.p.direction),p=function(t){var i=n.map(t.split(" "),function(n){if(n.substring(0,c.length+1)===c+"_")return parseInt(n.substring(c.length+1),10)});return i.length>0?i[0]:undefined},r,s,v=!1;if(a.hasClass(o)){if(h.showSummaryOnHide){if(i)while(i){if(n(i).hasClass("jqfoot")&&(w=parseInt(n(i).attr("jqfootlevel"),10),w<=e))break;n(i).hide();i=i.nextSibling}}else if(i)while(i){if(r=p(i.className),r!==undefined&&r<=e)break;n(i).hide();i=i.nextSibling}a.removeClass(o).addClass(l);v=!0}else{if(i)for(s=undefined;i;){if(r=p(i.className),s===undefined&&(s=r===undefined),r!==undefined){if(r<=e)break;r===e+1&&n(i).show().find(">td>span.tree-wrap-"+u.p.direction).removeClass(o).addClass(l)}else s&&n(i).show();i=i.nextSibling}a.removeClass(l).addClass(o)}n(u).triggerHandler("jqGridGroupingClickGroup",[t,v]);n.isFunction(u.p.onClickGroup)&&u.p.onClickGroup.call(u,t,v)}),!1},groupingRender:function(t,i){return this.each(function(){function p(n,t,i){var u=!1,r,f;if(t===0)u=i[n];else if(f=i[n].idx,f===0)u=i[n];else for(r=n;r>=0;r--)if(i[r].idx===f-t){u=i[r];break}return u}var u=this,r=u.p.groupingView,f="",a="",o,h,v=r.groupCollapse?r.plusicon:r.minusicon,s,c=[],y=r.groupField.length,e,l;v+=" tree-wrap-"+u.p.direction;n.each(u.p.colModel,function(n,t){for(var i=0;i<y;i++)if(r.groupField[i]===t.name){c[i]=n;break}});e=0;l=n.makeArray(r.groupSummary);l.reverse();n.each(r.groups,function(w,b){var ot,nt,k,tt,d,st,g,it,ft,et;e++;h=u.p.id+"ghead_"+b.idx;o=h+"_"+w;a="<span style='cursor:pointer;' class='ui-icon "+v+"' onclick=\"jQuery('#"+n.jgrid.jqID(u.p.id)+"').jqGrid('groupingToggle','"+o+"');return false;\"><\/span>";try{n.isArray(r.formatDisplayField)&&n.isFunction(r.formatDisplayField[b.idx])?(b.displayValue=r.formatDisplayField[b.idx].call(u,b.displayValue,b.value,u.p.colModel[c[b.idx]],b.idx,r),s=b.displayValue):s=u.formatter(o,b.displayValue,c[b.idx],b.value)}catch(lt){s=b.displayValue}if(f+='<tr id="'+o+'"'+(r.groupCollapse&&b.idx>0?' style="display:none;" ':" ")+'role="row" class= "ui-widget-content jqgroup ui-row-'+u.p.direction+" "+h+'"><td style="padding-left:'+b.idx*12+'px;" colspan="'+i+'">'+a+n.jgrid.template(r.groupText[b.idx],s,b.cnt,b.summary)+"<\/td><\/tr>",ot=y-1===b.idx,ot){for(nt=r.groups[w+1],st=nt!==undefined?r.groups[w+1].startRow:t.length,tt=b.startRow;tt<st;tt++)f+=t[tt].join("");if(nt!==undefined){for(g=0;g<r.groupField.length;g++)if(nt.dataIndex===r.groupField[g])break;e=r.groupField.length-g}for(d=0;d<e;d++)if(l[d]){it="";r.groupCollapse&&!r.showSummaryOnHide&&(it=' style="display:none;"');f+="<tr"+it+' jqfootlevel="'+(b.idx-d)+'" role="row" class="ui-widget-content jqfoot ui-row-'+u.p.direction+'">';var ht=p(w,d,r.groups),rt=u.p.colModel,ut,ct=ht.cnt;for(k=0;k<i;k++)ft="<td "+u.formatCol(k,1,"")+">&#160;<\/td>",et="{0}",n.each(ht.summary,function(){if(this.nm===rt[k].name){rt[k].summaryTpl&&(et=rt[k].summaryTpl);typeof this.st=="string"&&this.st.toLowerCase()==="avg"&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&ct>0&&(this.v=this.v/ct));try{ut=u.formatter("",this.v,k,this)}catch(t){ut=this.v}return ft="<td "+u.formatCol(k,1,"")+">"+n.jgrid.format(et,ut)+"<\/td>",!1}}),f+=ft;f+="<\/tr>"}e=g}});n("#"+n.jgrid.jqID(u.p.id)+" tbody:first").append(f);f=null})},groupingGroupBy:function(t,i){return this.each(function(){var f=this,u,r;for(typeof t=="string"&&(t=[t]),u=f.p.groupingView,f.p.grouping=!0,u.visibiltyOnNextGrouping===undefined&&(u.visibiltyOnNextGrouping=[]),r=0;r<u.groupField.length;r++)!u.groupColumnShow[r]&&u.visibiltyOnNextGrouping[r]&&n(f).jqGrid("showCol",u.groupField[r]);for(r=0;r<t.length;r++)u.visibiltyOnNextGrouping[r]=n("#"+n.jgrid.jqID(f.p.id)+"_"+n.jgrid.jqID(t[r])).is(":visible");f.p.groupingView=n.extend(f.p.groupingView,i||{});u.groupField=t;n(f).trigger("reloadGrid")})},groupingRemove:function(t){return this.each(function(){var i=this,r,u;if(t===undefined&&(t=!0),i.p.grouping=!1,t===!0){for(r=i.p.groupingView,u=0;u<r.groupField.length;u++)!r.groupColumnShow[u]&&r.visibiltyOnNextGrouping[u]&&n(i).jqGrid("showCol",r.groupField);n("tr.jqgroup, tr.jqfoot","#"+n.jgrid.jqID(i.p.id)+" tbody:first").remove();n("tr.jqgrow:hidden","#"+n.jgrid.jqID(i.p.id)+" tbody:first").show()}else n(i).trigger("reloadGrid")})},groupingCalculations:{handler:function(n,t,i,r,u,f){var o={sum:function(){return parseFloat(t||0)+parseFloat(f[i]||0)},min:function(){return t===""?parseFloat(f[i]||0):Math.min(parseFloat(t),parseFloat(f[i]||0))},max:function(){return t===""?parseFloat(f[i]||0):Math.max(parseFloat(t),parseFloat(f[i]||0))},count:function(){return(t===""&&(t=0),f.hasOwnProperty(i))?t+1:0},avg:function(){return o.sum()}},e,s;if(!o[n])throw"jqGrid Grouping No such method: "+n;return e=o[n](),r!=null&&(u==="fixed"?e=e.toFixed(r):(s=Math.pow(10,r),e=Math.round(e*s)/s)),e}}})}(jQuery),function(n){n.jgrid=n.jgrid||{};n.extend(n.jgrid,{defaults:{recordtext:"{0} - {1}　共 {2} 条",emptyrecords:"无数据显示",loadtext:"",pgtext:" {0} 共 {1} 页"},search:{caption:"搜索...",Find:"查找",Reset:"重置",odata:[{oper:"eq",text:"等于　　"},{oper:"ne",text:"不等　　"},{oper:"lt",text:"小于　　"},{oper:"le",text:"小于等于"},{oper:"gt",text:"大于　　"},{oper:"ge",text:"大于等于"},{oper:"bw",text:"开始于"},{oper:"bn",text:"不开始于"},{oper:"in",text:"属于　　"},{oper:"ni",text:"不属于"},{oper:"ew",text:"结束于"},{oper:"en",text:"不结束于"},{oper:"cn",text:"包含　　"},{oper:"nc",text:"不包含"},{oper:"nu",text:"is null"},{oper:"nn",text:"is not null"}],groupOps:[{op:"AND",text:"所有"},{op:"OR",text:"任一"}]},edit:{addCaption:"添加记录",editCaption:"编辑记录",bSubmit:"提交",bCancel:"取消",bClose:"关闭",saveData:"数据已改变，是否保存？",bYes:"是",bNo:"否",bExit:"取消",msg:{required:"此字段必需",number:"请输入有效数字",minValue:"输值必须大于等于 ",maxValue:"输值必须小于等于 ",email:"这不是有效的e-mail地址",integer:"请输入有效整数",date:"请输入有效时间",url:"无效网址。前缀必须为 ('http://' 或 'https://')",nodefined:" 未定义！",novalue:" 需要返回值！",customarray:"自定义函数需要返回数组！",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"查看记录",bClose:"关闭"},del:{caption:"删除",msg:"删除所选记录？",bSubmit:"删除",bCancel:"取消"},nav:{edittext:"",edittitle:"编辑所选记录",addtext:"",addtitle:"添加新记录",deltext:"",deltitle:"删除所选记录",searchtext:"",searchtitle:"查找",refreshtext:"",refreshtitle:"刷新表格",alertcap:"注意",alerttext:"请选择记录",viewtext:"",viewtitle:"查看所选记录"},col:{caption:"选择列",bSubmit:"确定",bCancel:"取消"},errors:{errcap:"错误",nourl:"没有设置url",norecords:"没有要处理的记录",model:"colNames 和 colModel 长度不等！"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["日","一","二","三","四","五","六","星期日","星期一","星期二","星期三","星期四","星期五","星期六",],monthNames:["一","二","三","四","五","六","七","八","九","十","十一","十二","一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],AmPm:["am","pm","上午","下午"],S:function(n){return n<11||n>13?["st","nd","rd","th"][Math.min((n-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"Y-m-d",parseRe:/[Tt\\\/:_;.,\t\s-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO",YearMonth:"F, Y"},reformatAfterEdit:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0},idName:"id"}})}(jQuery);