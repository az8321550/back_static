
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>数字营销平台</title><link rel="shortcut icon" href="../../static/dmp/images/favicon.ico">
    <link href="../../static/dmp/plugins/bootstrap/css/bootstrap.css" rel="stylesheet" />
    <link href="../../static/dmp/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
    <link href="../../static/dmp/plugins/jquery-jqgrid/ui.jqgrid.css" rel="stylesheet" />
    <link href="../../static/dmp/plugins/bootstrap-datetimepicker/css/datetimepicker.css" rel="stylesheet" />
    <link href="../../static/dmp/styles/base.css" rel="stylesheet" />
    <link href="../../static/dmp/styles/chart.css" rel="stylesheet" />
</head>
<body>
<div class="sider">
    <div class="home-menu">
        <a href="index.html">
            <i class="icon icon-home"></i>
        </a>
    </div>
    <div class="main-name">
        数字营销平台
    </div>
    <div class="user clearfix">
        <img src="../../static/dmp/images/header.png" />
        Admin_Super
    </div>
    <ul class="menu">
        <li><a href="taglist.html">标签管理</a></li>
        <li class="active"><a href="tagmanage.html">指标管理</a></li>
    </ul>
    <ul class="menu set-menu">
        <li><a href="list.html">营销中心</a></li>
        <li><a href="tmplactive.html">模板中心</a></li>
        <li><a href="waylist.html">渠道中心</a></li>
    </ul>
</div>
<div class="content">
    <div class="clearfix">
        <div class="col-xs-12">
            <div id="list-top">
                <div class="breadcrumb-con">
                    <ol class="breadcrumb">
                        <li><a href="index.html"><i class="icon icon-home"></i></a></li>
                        <li><a href="#">常规业务</a></li>
                        <li class="active">指标管理</li>
                    </ol>
                    <div class="search-con">
                        <form>
                            <input class="text" type="text" placeholder="快速检索" />
                            <button class="button"><i class="icon icon-search"></i></button>
                        </form>
                    </div>
                </div>
                <div class="content-title clearfix mb20">
                    <span class="title fontblue">发送统计</span>
                    <div class="tab-chart">
                        <a href="chart.html" class="tab-chart-item">总表</a>
                        <a href="chart2.html" class="tab-chart-item">活动</a>
                        <a href="chart3.html" class="tab-chart-item active">标签</a>
                    </div>
                    <div class="filter">
                        <a href="#" class="btn btn-default btn-sm btn-chart">图形视图</a>
                        <a href="#" class="btn btn-blue btn-sm">导出</a>
                    </div>
                </div>
            </div>
            <div class="clearfix re">
                <div class="tag-nav">
                    <ul class="nav nav-tabs">
                        <li class="active"><a href="#" data-toggle="tab">营销Push</a></li>
                        <li><a href="#" data-toggle="tab">营销邮件</a></li>
                        <li><a href="#" data-toggle="tab">应用邮件</a></li>
                        <li><a href="#" data-toggle="tab">营销短信</a></li>
                        <li><a href="#" data-toggle="tab">应用短信</a></li>
                    </ul>
                </div>
                <div class="data-con active">
                    <div class="clearfix chart-form">
                        <input type="text" class="form-control input-sm chart-input chart-time">
                        <input type="text" class="form-control input-sm chart-input chart-time">
                        <button class="btn btn-success btn-sm chart-search">查询</button>
                        <div class="chart-timearea">
                            <span>最近：</span>
                            <div class="btn-group">
                                <button type="button" class="btn btn-default btn-sm">7天</button>
                                <button type="button" class="btn btn-default btn-sm">30天</button>
                                <button type="button" class="btn btn-default btn-sm">90天</button>
                                <button type="button" class="btn btn-default btn-sm">180天</button>
                            </div>
                        </div>
                    </div>
                    <div class="chart-con active">
                        <table id="data" class="ui-jqgrid"></table>
                        <div id="pager"></div>
                    </div>
                    <div class="chart-con">
                        <div id="chart-line" class="chart-line"></div>
                    </div>
                    <div class="chart-con">
                        <div class="clearfix">
                            <div id="chart-pie" class="chart-pie"></div>
                            <div id="chart-pie2" class="chart-pie"></div>
                            <div id="chart-pie3" class="chart-pie"></div>
                        </div>
                    </div>
                    <div class="chart-con">
                        <div id="chart-lineCount" class="chart-line"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
<script src="../../static/dmp/plugins/jquery/jquery.js"></script>
<script src="../../static/dmp/plugins/bootstrap/js/bootstrap.min.js"></script>
<script src="../../static/dmp/plugins/bootstrap-bootbox/bootbox.js"></script>
<script src="../../static/dmp/plugins/jquery-mockjax/jquery.mockjax.js"></script>
<script src="../../static/dmp/plugins/jquery-jqgrid/jquery.jqGrid.js"></script>
<script src="../../static/dmp/plugins/jquery-validation/1.9.0/jquery.validate.min.js"></script>
<script src="../../static/dmp/scripts/app.js"></script>
<script src="../../static/dmp/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
<!--chart-->
<script src="../../static/dmp/plugins/chart/echarts/esl.js"></script>
<script>
    !function () {

        //模拟ajax
        $.mockjax({
            url: "test.php",
            type: "post",
            responseTime: 1,
            responseText: JSON.stringify({ "page": 1, "totalPage": 1, "totalCount": 888, "rows": [{ "id": 100, "cell": ["A00101", "近一个月访问频率", "字符型", "android,pc,其他,wap,ios", "79791,79792,79793,79794,79795", "单选", "启用", "次数", "2014-3-18 11:12"] }, { "id": 101, "cell": ["A00101", "近一个月访问频率", "字符型", "android,pc,其他,wap,ios", "79791,79792,79793,79794,79795", "单选", "启用", "次数", "2014-3-18 11:12"] }, { "id": 102, "cell": ["A00101", "近一个月访问频率", "字符型", "android,pc,其他,wap,ios", "79791,79792,79793,79794,79795", "单选", "启用", "次数", "2014-3-18 11:12"] }, { "id": 103, "cell": ["A00101", "近一个月访问频率", "字符型", "android,pc,其他,wap,ios", "79791,79792,79793,79794,79795", "单选", "启用", "次数", "2014-3-18 11:12"] }, { "id": 4, "cell": ["A00101", "近一个月访问频率", "字符型", "android,pc,其他,wap,ios", "79791,79792,79793,79794,79795", "单选", "启用", "次数", "2014-3-18 11:12"] }, { "id": 5, "cell": ["A00101", "近一个月访问频率", "字符型", "android,pc,其他,wap,ios", "79791,79792,79793,79794,79795", "单选", "启用", "次数", "2014-3-18 11:12"] }, { "id": 6, "cell": ["A00101", "近一个月访问频率", "字符型", "android,pc,其他,wap,ios", "79791,79792,79793,79794,79795", "单选", "启用", "次数", "2014-3-18 11:12"] }] })
        });

        $(".chart-time").datetimepicker();

        //jqGrid配置
        $("#data").jqGrid({
            url: 'test.php',
            multiselect: false,
            height: $(window).height() - $("#list-top").height() - 137,
            width: $(".content").width() - 167,
            rowNum: 40,
            rowList: [20, 40, 80],
            colNames: ['日期', '发送数', '到达数', '打开数', '到达率', '打开率'],
            colModel: [
                {},
                {},
                {},
                {},
                {},
                {}
            ]
        });
        $(window).unbind("resize").resize(function () {
            $("#data").setGridWidth($(".content").width() - 167);
            $("#data").setGridHeight($(window).height() - $("#list-top").height() - 137);
        });

        $(".btn-chart").click(function(){
            var target=$(".chart-con.active");
            if(target.index()==4){
                target.removeClass("active");
                $(".chart-con").eq(0).addClass("active");
            }else{
                target.removeClass("active").next().addClass("active");
            }
            switch(target.index()){
                case 1:
                    line();
                    break;
                case 2:
                    pie();
                    break;
                case 3:
                    lineCount();
                    break;
            }
            return false;
        });

        var line=function(){
            require(['mychart'], function (chart) {
                var chartData={
                    footer:['9.1','9.2','9.3','9.4','9.5','9.6','9.7','9.8','9.9','9.10','9.11','9.12','9.13','9.14','9.15'],
                    data:[120, 132, 101, 134, 90, 230, 210, 210, 1210, 588, 789, 985, 658, 210, 899]
                };
                chart.line(chartData,"#chart-line");
            });
        };

        var pie=function(){
            require(['mychart'], function (chart) {
                var chartData={
                    title:"发送数：",
                    footer:['直接访问','邮件营销','联盟广告','视频广告','搜索引擎'],
                    data:[
                        {value:335, name:'直接访问'},
                        {value:310, name:'邮件营销'},
                        {value:234, name:'联盟广告'},
                        {value:135, name:'视频广告'},
                        {value:1548, name:'搜索引擎'}
                    ]
                };
                chart.pie(chartData,"#chart-pie");
                chart.pie(chartData,"#chart-pie2");
                chart.pie(chartData,"#chart-pie3");
            });
        };

        var lineCount=function(){
            require(['mychart'], function (chart) {
                var chartData={
                    title:"发送数：",
                    footer:['9.1','9.2','9.3','9.4','9.5','9.1','9.2','9.3','9.4','9.5','9.1','9.2','9.3','9.4','9.5','9.1','9.2','9.3','9.4','9.5'],
                    series: [
                        {
                            name:'邮件营销',
                            type:'line',
                            stack: '总量',
                            data:[335,310,234,135,550,835,910,1034,1135,1550,835,910,1034,1135,1550,835,910,1034,1135,1550]
                        },
                        {
                            name:'邮件营销2',
                            type:'line',
                            stack: '总量',
                            data:[835,910,1034,1135,1550,835,910,1034,1135,1550,835,910,1034,1135,1550,835,910,1034,1135,1550]
                        }
                    ]
                };
                chart.lineCount(chartData,"#chart-lineCount");
            });
        };

        // 路径配置
        fileLocation='../../static/dmp/plugins/chart/echarts/echarts';
        require.config({
            paths:{
                'echarts' : fileLocation,
                'echarts/chart/line': fileLocation,
                'echarts/chart/bar': fileLocation,
                'echarts/chart/scatter': fileLocation,
                'echarts/chart/k': fileLocation,
                'echarts/chart/pie': fileLocation,
                'echarts/chart/radar': fileLocation,
                'echarts/chart/map': fileLocation,
                'echarts/chart/chord': fileLocation,
                'echarts/chart/force': fileLocation,
                'echarts/chart/gauge': fileLocation,
                'echarts/chart/funnel': fileLocation,
                'mychart':"../../static/dmp/scripts/chart"
            }
        });

    }();
</script>
</body>
</html>
